{"version":3,"sources":["_images/youtube.png","_images/twitter.png","_images/openstreetmap.svg","queries.js","functions.js","PageMap/PruneCluster_dist/PruneCluster.js","PageMap/index.js","MainDrawerContent/index.js","SearchBar/index.js","Questions/index.js","Sidebar/index.js","FiltersPanelContent/index.js","App/index.js","index.js","_images/yelp.png","_images/facebook.png","_images/instagram.png"],"names":["module","exports","loadPlace","gql","loadMarkers","search","loadQuestions","answerQuestion","getPreset","tags","presets","tags_keys","Object","keys","preset_key","preset_tags","preset_tags_keys","common_keys","filter","key","includes","length","getColorByPreset","colorsByPreset_sorted","pair","startsWith","getWantedTagsList","Set","concat","values","map","preset","PruneCluster","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","this","constructor","prototype","create","PruneCluster_1","Point","ClusterObject","hashCodeCounter","maxHashCodeValue","Math","pow","Marker","_super","lat","lng","data","category","weight","filtered","_this","call","position","hashCode","Move","SetData","Cluster","marker","stats","ENABLE_MARKERS_LIST","_clusterMarkers","lastMarker","population","undefined","totalWeight","averagePosition","AddMarker","push","h","currentTotalWeight","newWeight","Reset","ComputeBounds","cluster","proj","Project","size","Size","startX","floor","x","startY","y","a","UnProject","bounds","minLat","maxLat","minLng","maxLng","GetClusterMarkers","ApplyCluster","newCluster","min","max","insertionSort","list","j","tmp","tmpLng","i","_markers","_nbChanges","_clusters","ViewPadding","RegisterMarker","_removeFlag","RegisterMarkers","markers","forEach","_sortMarkers","total","nbChanges","sort","_sortClusters","_indexLowerBoundLng","it","step","first","count","_resetClusterViews","l","ProcessView","heightBuffer","abs","widthBuffer","extendedBounds","firstIndex","clusters","workingClusterList","slice","markerPosition","clusterFound","ll","splice","newClustersList","RemoveMarkers","newMarkersList","FindMarkersInArea","area","aMinLat","aMaxLat","aMinLng","aMaxLng","result","pos","withFiltered","rMinLat","Number","MAX_VALUE","rMaxLat","rMinLng","rMaxLng","FindMarkersBoundsInArea","ComputeGlobalBounds","GetMarkers","GetPopulation","ResetClusters","PruneClusterForLeaflet","L","Layer","Class","extend","initialize","clusterMargin","_map","project","LatLng","getZoom","unproject","_objectsOnMap","spiderfier","PruneClusterLeafletSpiderfier","_hardMove","_resetIcons","_removeTimeoutId","_markersRemoveListTimeout","BuildLeafletCluster","m","icon","BuildLeafletClusterIcon","_leafletClusterBounds","on","cbounds","markersArea","LatLngBounds","zoomLevelBefore","zoomLevelAfter","getBoundsZoom","filteredBounds","o","_leafletMarker","newMarkersArea","markerPos","isFiltered","currentFilteredBounds","getMaxZoom","fire","center","getLatLng","setView","fitBounds","c","iconSize","maxPopulation","DivIcon","html","className","point","BuildLeafletMarker","PrepareLeafletMarker","setIcon","popup","content","getPopup","setPopupContent","popupOptions","bindPopup","onAdd","_moveStart","_moveEnd","_zoomStart","_zoomEnd","addLayer","onRemove","off","removeLayer","_moveInProgress","e","hard","_zoomInProgress","getBounds","zoom","marginRatio","resetIcons","southWest","getSouthWest","northEast","getNorthEast","objectsOnMap","newObjectsOnMap","markersOnMap","_removeFromMap","clusterCreationList","clusterCreationListPopOne","opacityUpdateList","workingList","icluster","iclusterData","latMargin","lngMargin","oldMaxLng","oldMinLat","oldMaxLat","newMinLng","newMinLat","newMaxLat","_leafletCollision","_leafletOldPopulation","_leafletOldHashCode","oldMarker","_hashCode","_zoomLevel","forceIconRedraw","setLatLng","_leafletPosition","equals","boundsCopy","Util","_population","idata","remove","pa","jcluster","jdata","pb","oldMinLng","newMaxLng","poisson","console","error","creationMarker","iposition","addTo","setOpacity","window","setTimeout","_icon","DomUtil","addClass","_shadow","clearTimeout","toRemove","FitBounds","RedrawIcons","processView","_2PI","PI","_circleFootSeparation","_circleStartAngle","_spiralFootSeparation","_spiralLengthStart","_spiralLengthFactor","_spiralCountTrigger","spiderfyDistanceMultiplier","_cluster","_currentMarkers","_multiLines","multiPolyline","_lines","color","polyline","Spiderfy","Unspiderfy","_currentCenter","points","centerPoint","latLngToLayerPoint","_generatePointsSpiral","_generatePointsCircle","polylines","leafletMarkers","projectedPoints","layerPointToLatLng","setZIndexOffset","startTime","Date","anim","setInterval","clearInterval","stepRatio","diffLat","diffLng","setLatLngs","_clusterMarker","centerPt","angle","legLength","angleStep","res","round","cos","sin","separation","lengthFactor","PageMap","props","state","docs","filters","showPlace","bind","gotMapRef","createPruneCluster","addMarkersToPruneCluster","filterMarkers","showAllMarkers","onFunctions","getCenter","flyToBounds","panTo","flyTo","invalidateSize","graphql","query","query_loadMarkers","variables","wantedTags","then","getMarkers","doc","___preset","___color","colorsByPreset","colors","default","catch","log","navigate","_id","onViewDoc","Map","mapRef","leafletElement","stops","counter","currentPos","ceil","join","ConicGradient","repeating","clusterGroup","clusterBounds","animate","duration","leafletMarker","divIcon","bg","fg","toLowerCase","name","bindTooltip","sticky","interactive","opacity","permanent","entries","reduce","obj","colors_sum","sum","gradient","getConicGradient","dataURL","presets_length","selectedAge","ageOption","isInPresets","bool","value","isInAgeRange","min_age","max_age","parsedMin","parseFloat","parsedMax","isNaN","ref","preferCanvas","useFlyTo","minZoom","maxZoom","zoomSnap","zoomControl","fadeAnimation","worldCopyJump","maxBoundsViscosity","maxBounds","TileLayer","detectRetina","attribution","url","React","Component","ListItemLink","ListItem","button","component","MainDrawerContent","windowIsFullscreen","toogleFullscreen","document","fullscreenEnabled","fullscreenElement","querySelector","requestFullscreen","setState","exitFullscreen","List","ListItemIcon","style","ListItemText","primary","Divider","onClick","SearchBar","loadingSearchResult","isMainDrawerOpen","submitTheSearchQuery","saveSearchQueryText","searchKeypressed","closeSidebar","toggleMainDrawer","prevProps","prevState","snapshot","event","target","onStartSearch","onSetSidebarIsOpen","onSetSearchBarValue","Drawer","open","onClose","Paper","sidebarIsOpen","elevation","variant","IconButton","edge","margin","padding","aria-label","InputBase","height","flex","placeholder","inputProps","onChange","onKeyPress","disabled","type","Questions","questionsAreLoaded","answersByQuestionId","questionDoc","inputValues","setNextQuestionDoc","finish","submitInputs","directlySubmitInputValue","onFinish","query_loadQuestions","questions","questionsById","questionIDs","answerValue","mutate","mutation","mutation_answerQuestion","properties","forID","questionID","answer","info","answerKey","answeredQuestionIDs","nextQuestionDoc","questionIDs_NotAsked","id","random","hasInputField","possibleAnswers","possibleAnswer","inputtype","Fragment","Typography","question","display","alignItems","alignContent","justifyContent","flexDirection","possibleAnswerKey","TextField","label","title","multiline","saveInputValue","Button","flexGrow","border","boxShadow","marginRight","borderRadius","marginLeft","Fab","background","renderQuestion","textAlign","YelpIcon","Icon","backgroundImage","yelp_icon","backgroundSize","backgroundRepeat","FacebookIcon","facebook_icon","InstagramIcon","instagram_icon","YouTubeIcon","youtube_icon","TwitterIcon","twitter_icon","OpenstreetmapIcon","openstreetmap_icon","Sidebar","changedProperties","stage","whichSnackbarIsOpen","edit","view","renderView","renderQuestions","updateChangedProperties","getAgeRangeText","getChangesetDoc","closeAllSnackbarsOnTimeout","checkIfDocIdChanged","editNewDoc","setDoc","docID","typename","newDoc","parseInt","numbers","numbersSorted","sources","comment","forDoc","__typename","fromBot","created_by","created_at","newValues","links","match","URL","href","text","hostname","protocol","pathname","age_range_text","link_tags","website","yelp","facebook","instagram","twitter","youtube","email","phonenumber","faxnumber","get_username_regexp","matches","osmID","linkIcons","osm","contact","link","socialMedia","Card","CardContent","dense","reason","backgroundColor","flexShrink","gutterBottom","fontWeight","m_argin","m_inWidth","m_arginRight","en","Snackbar","message","anchorOrigin","vertical","horizontal","autoHideDuration","_categories_","FiltersPanelContent","age","ages","apply","v","highest_ages_entry","setValue","getFilterObj","stateKeyName","closeMenuCallback","popupState","bindTrigger","Menu","bindMenu","transitionDuration","MenuItem","close","isSelected","selected","MenuListProps","minWidth","number","App","searchBarValue","functions","startSearch","setSearchBarValue","setSidebarIsOpen","addPlace","loadAndViewDoc","filtersChanged","componentName","functionsObject","queryString","callback","test","query_search","geometry","boundingbox","southwest","northeast","query_loadPlace","getPlace","zoomLevel","pageOpenTS","location","newFilters","path","onSetView","onFlyTo","onGetZoom","attr","saveFunctions","ApolloClient","uri","host","origin","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.02465b83.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/youtube.fe8ee891.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/openstreetmap.e69a33e8.svg\";","import {gql} from 'apollo-boost'\n\nexport const loadPlace = gql`\n\tquery($_id: String=\"\", $wantedTags: [String]){\n\t\tgetPlace(_id: $_id){\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Place {\n\t\t\t\t\tname\n\t\t\t\t\tgeometry {\n\t\t\t\t\t\tlocation {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tosmID\n\t\t\t\t\ttags(keys: $wantedTags)\n\t\t\t\t\tconfidences(keys: $wantedTags)\n\t\t\t\t\tpermanently_closed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const loadPlaces = gql`\n\tquery($wantedTags: [String]){\n\t\tgetPlaces{\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Place {\n\t\t\t\t\tgeometry {\n\t\t\t\t\t\tlocation {\n\t\t\t\t\t\t\tlng\n\t\t\t\t\t\t\tlat\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttags(keys: $wantedTags)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const loadMarkers = gql`\n\tquery($wantedTags: [String]){\n\t\tgetMarkers{\n\t\t\t_id\n\t\t\tname\n\t\t\tlng\n\t\t\tlat\n\t\t\ttags(keys: $wantedTags)\n\t\t}\n\t}\n`\n\nexport const search = gql`\n\tquery($query: String=\"\"){\n\t\tsearch(query: $query){\t\n\t\t\tgeometry {\n\t\t\t\tboundingbox {\n\t\t\t\t\tnortheast {\n\t\t\t\t\t\tlng\n\t\t\t\t\t\tlat\n\t\t\t\t\t}\n\t\t\t\t\tsouthwest {\n\t\t\t\t\t\tlng\n\t\t\t\t\t\tlat\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const loadQuestions = gql`\n\tquery{\n\t\tquestions: getQuestions {\n\t\t\t_id\n\t\t\tproperties {\n\t\t\t\t... on Question {\n\t\t\t\t\tquestion\n\t\t\t\t\tpossibleAnswers {\n\t\t\t\t\t\tinputtype\n\t\t\t\t\t\tkey\n\t\t\t\t\t\ticon\n\t\t\t\t\t\ttitle\n\t\t\t\t\t\ttags\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`\n\nexport const answerQuestion = gql`\n\tmutation($properties: JSONObject){\n\t\tanswerQuestion(properties: $properties)\n\t}\n`","export function getPreset(tags,presets) {\n\tconst tags_keys = Object.keys(tags)\n\tfor (const preset_key in presets) {\n\t\tconst preset_tags = presets[preset_key].tags\n\t\tconst preset_tags_keys = Object.keys(preset_tags)\n\n\t\tconst common_keys = preset_tags_keys.filter(key => tags_keys.includes(key))\n\n\t\tif (common_keys.length === preset_tags_keys.length) {\n\t\t\tconst okay_keys = common_keys.filter(key => preset_tags[key] === '*' || tags[key].includes(preset_tags[key]))\n\t\t\tif (okay_keys.length === preset_tags_keys.length) {\n\t\t\t\treturn {\n\t\t\t\t\tkey: preset_key,\n\t\t\t\t\t...presets[preset_key],\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\treturn {\n\t\t\"key\": \"\",\n\t\t\"tags_length\": 0,\n\t\t\"max_tag_value_length\": 0,\n\t\t\"tags\": {},\n\t\t\"name\": {},\n\t\t\"terms\": {}\n\t}\n\t// return presets[Object.keys(presets)[0]]\n}\n\nexport function getColorByPreset(preset_key,colorsByPreset_sorted){\n\tfor (const pair of colorsByPreset_sorted) {\n\t\tif (preset_key.startsWith(pair[0])) {\n\t\t\treturn pair[1]\n\t\t\t// break\n\t\t}\n\t}\n}\n\nexport function getWantedTagsList(presets){\n\treturn [...new Set([].concat(...Object.values(presets).map(preset=>Object.keys(preset.tags))))]\n}","/* eslint-disable */\n\nimport L from 'leaflet'\n\nvar __extends = (this && this.__extends) || (function() {\n  var extendStatics = Object.setPrototypeOf ||\n    ({\n        __proto__: []\n      }\n      instanceof Array && function(d, b) {\n        d.__proto__ = b;\n      }) ||\n    function(d, b) {\n      for (var p in b)\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n  return function(d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n})();\nvar PruneCluster;\n(function(PruneCluster_1) {\n  var Point = (function() {\n    function Point() {}\n    return Point;\n  }());\n  PruneCluster_1.Point = Point;\n  var ClusterObject = (function() {\n    function ClusterObject() {}\n    return ClusterObject;\n  }());\n  PruneCluster_1.ClusterObject = ClusterObject;\n  var hashCodeCounter = 1;\n  var maxHashCodeValue = Math.pow(2, 53) - 1;\n  var Marker = (function(_super) {\n    __extends(Marker, _super);\n\n    function Marker(lat, lng, data, category, weight, filtered) {\n      if (data === void 0) {\n        data = {};\n      }\n      if (weight === void 0) {\n        weight = 1;\n      }\n      if (filtered === void 0) {\n        filtered = false;\n      }\n      var _this = _super.call(this) || this;\n      _this.data = data;\n      _this.position = {\n        lat: +lat,\n        lng: +lng\n      };\n      _this.weight = weight;\n      _this.category = category;\n      _this.filtered = filtered;\n      _this.hashCode = hashCodeCounter++;\n      return _this;\n    }\n    Marker.prototype.Move = function(lat, lng) {\n      this.position.lat = +lat;\n      this.position.lng = +lng;\n    };\n    Marker.prototype.SetData = function(data) {\n      for (var key in data) {\n        this.data[key] = data[key];\n      }\n    };\n    return Marker;\n  }(ClusterObject));\n  PruneCluster_1.Marker = Marker;\n  var Cluster = (function(_super) {\n    __extends(Cluster, _super);\n\n    function Cluster(marker) {\n      var _this = _super.call(this) || this;\n      _this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      _this.data = {};\n      if (!marker) {\n        _this.hashCode = 1;\n        if (Cluster.ENABLE_MARKERS_LIST) {\n          _this._clusterMarkers = [];\n        }\n        return _this;\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        _this._clusterMarkers = [marker];\n      }\n      _this.lastMarker = marker;\n      _this.hashCode = 31 + marker.hashCode;\n      _this.population = 1;\n      if (marker.category !== undefined) {\n        _this.stats[marker.category] = 1;\n      }\n      _this.totalWeight = marker.weight;\n      _this.position = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      _this.averagePosition = {\n        lat: marker.position.lat,\n        lng: marker.position.lng\n      };\n      return _this;\n    }\n    Cluster.prototype.AddMarker = function(marker) {\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers.push(marker);\n      }\n      var h = this.hashCode;\n      h = ((h << 5) - h) + marker.hashCode;\n      if (h >= maxHashCodeValue) {\n        this.hashCode = h % maxHashCodeValue;\n      } else {\n        this.hashCode = h;\n      }\n      this.lastMarker = marker;\n      var weight = marker.weight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          marker.position.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          marker.position.lng * weight) / newWeight;\n      ++this.population;\n      this.totalWeight = newWeight;\n      if (marker.category !== undefined) {\n        this.stats[marker.category] = (this.stats[marker.category] + 1) || 1;\n      }\n    };\n    Cluster.prototype.Reset = function() {\n      this.hashCode = 1;\n      this.lastMarker = undefined;\n      this.population = 0;\n      this.totalWeight = 0;\n      this.stats = [0, 0, 0, 0, 0, 0, 0, 0];\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = [];\n      }\n    };\n    Cluster.prototype.ComputeBounds = function(cluster) {\n      var proj = cluster.Project(this.position.lat, this.position.lng);\n      var size = cluster.Size;\n      var nbX = Math.floor(proj.x / size),\n        nbY = Math.floor(proj.y / size),\n        startX = nbX * size,\n        startY = nbY * size;\n      var a = cluster.UnProject(startX, startY),\n        b = cluster.UnProject(startX + size, startY + size);\n      this.bounds = {\n        minLat: b.lat,\n        maxLat: a.lat,\n        minLng: a.lng,\n        maxLng: b.lng\n      };\n    };\n    Cluster.prototype.GetClusterMarkers = function() {\n      return this._clusterMarkers;\n    };\n    Cluster.prototype.ApplyCluster = function(newCluster) {\n      this.hashCode = this.hashCode * 41 + newCluster.hashCode * 43;\n      if (this.hashCode > maxHashCodeValue) {\n        this.hashCode = this.hashCode = maxHashCodeValue;\n      }\n      var weight = newCluster.totalWeight,\n        currentTotalWeight = this.totalWeight,\n        newWeight = weight + currentTotalWeight;\n      this.averagePosition.lat =\n        (this.averagePosition.lat * currentTotalWeight +\n          newCluster.averagePosition.lat * weight) / newWeight;\n      this.averagePosition.lng =\n        (this.averagePosition.lng * currentTotalWeight +\n          newCluster.averagePosition.lng * weight) / newWeight;\n      this.population += newCluster.population;\n      this.totalWeight = newWeight;\n      this.bounds.minLat = Math.min(this.bounds.minLat, newCluster.bounds.minLat);\n      this.bounds.minLng = Math.min(this.bounds.minLng, newCluster.bounds.minLng);\n      this.bounds.maxLat = Math.max(this.bounds.maxLat, newCluster.bounds.maxLat);\n      this.bounds.maxLng = Math.max(this.bounds.maxLng, newCluster.bounds.maxLng);\n      for (var category in newCluster.stats) {\n        if (newCluster.stats.hasOwnProperty(category)) {\n          if (this.stats.hasOwnProperty(category)) {\n            this.stats[category] += newCluster.stats[category];\n          } else {\n            this.stats[category] = newCluster.stats[category];\n          }\n        }\n      }\n      if (Cluster.ENABLE_MARKERS_LIST) {\n        this._clusterMarkers = this._clusterMarkers.concat(newCluster.GetClusterMarkers());\n      }\n    };\n    Cluster.ENABLE_MARKERS_LIST = false;\n    return Cluster;\n  }(ClusterObject));\n  PruneCluster_1.Cluster = Cluster;\n\n  function checkPositionInsideBounds(a, b) {\n    return (a.lat >= b.minLat && a.lat <= b.maxLat) &&\n      a.lng >= b.minLng && a.lng <= b.maxLng;\n  }\n\n  function insertionSort(list) {\n    for (var i = 1, j, tmp, tmpLng, length = list.length; i < length; ++i) {\n      tmp = list[i];\n      tmpLng = tmp.position.lng;\n      for (j = i - 1; j >= 0 && list[j].position.lng > tmpLng; --j) {\n        list[j + 1] = list[j];\n      }\n      list[j + 1] = tmp;\n    }\n  }\n\n  function shouldUseInsertionSort(total, nbChanges) {\n    if (nbChanges > 300) {\n      return false;\n    } else {\n      return (nbChanges / total) < 0.2;\n    }\n  }\n  var PruneCluster = (function() {\n    function PruneCluster() {\n      this._markers = [];\n      this._nbChanges = 0;\n      this._clusters = [];\n      this.Size = 166;\n      this.ViewPadding = 0.2;\n    }\n    PruneCluster.prototype.RegisterMarker = function(marker) {\n      if (marker._removeFlag) {\n        delete marker._removeFlag;\n      }\n      this._markers.push(marker);\n      this._nbChanges += 1;\n    };\n    PruneCluster.prototype.RegisterMarkers = function(markers) {\n      var _this = this;\n      markers.forEach(function(marker) {\n        _this.RegisterMarker(marker);\n      });\n    };\n    PruneCluster.prototype._sortMarkers = function() {\n      var markers = this._markers,\n        length = markers.length;\n      if (this._nbChanges && !shouldUseInsertionSort(length, this._nbChanges)) {\n        this._markers.sort(function(a, b) {\n          return a.position.lng - b.position.lng;\n        });\n      } else {\n        insertionSort(markers);\n      }\n      this._nbChanges = 0;\n    };\n    PruneCluster.prototype._sortClusters = function() {\n      insertionSort(this._clusters);\n    };\n    PruneCluster.prototype._indexLowerBoundLng = function(lng) {\n      var markers = this._markers,\n        it, step, first = 0,\n        count = markers.length;\n      while (count > 0) {\n        step = Math.floor(count / 2);\n        it = first + step;\n        if (markers[it].position.lng < lng) {\n          first = ++it;\n          count -= step + 1;\n        } else {\n          count = step;\n        }\n      }\n      return first;\n    };\n    PruneCluster.prototype._resetClusterViews = function() {\n      for (var i = 0, l = this._clusters.length; i < l; ++i) {\n        var cluster = this._clusters[i];\n        cluster.Reset();\n        cluster.ComputeBounds(this);\n      }\n    };\n    PruneCluster.prototype.ProcessView = function(bounds) {\n      var heightBuffer = Math.abs(bounds.maxLat - bounds.minLat) * this.ViewPadding,\n        widthBuffer = Math.abs(bounds.maxLng - bounds.minLng) * this.ViewPadding;\n      var extendedBounds = {\n        minLat: bounds.minLat - heightBuffer - heightBuffer,\n        maxLat: bounds.maxLat + heightBuffer + heightBuffer,\n        minLng: bounds.minLng - widthBuffer - widthBuffer,\n        maxLng: bounds.maxLng + widthBuffer + widthBuffer\n      };\n      this._sortMarkers();\n      this._resetClusterViews();\n      var firstIndex = this._indexLowerBoundLng(extendedBounds.minLng);\n      var markers = this._markers,\n        clusters = this._clusters;\n      var workingClusterList = clusters.slice(0);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var marker = markers[i],\n          markerPosition = marker.position;\n        if (markerPosition.lng > extendedBounds.maxLng) {\n          break;\n        }\n        if (markerPosition.lat > extendedBounds.minLat &&\n          markerPosition.lat < extendedBounds.maxLat &&\n          !marker.filtered) {\n          var clusterFound = false,\n            cluster;\n          for (var j = 0, ll = workingClusterList.length; j < ll; ++j) {\n            cluster = workingClusterList[j];\n            if (cluster.bounds.maxLng < marker.position.lng) {\n              workingClusterList.splice(j, 1);\n              --j;\n              --ll;\n              continue;\n            }\n            if (checkPositionInsideBounds(markerPosition, cluster.bounds)) {\n              cluster.AddMarker(marker);\n              clusterFound = true;\n              break;\n            }\n          }\n          if (!clusterFound) {\n            cluster = new Cluster(marker);\n            cluster.ComputeBounds(this);\n            clusters.push(cluster);\n            workingClusterList.push(cluster);\n          }\n        }\n      }\n      var newClustersList = [];\n      for (i = 0, l = clusters.length; i < l; ++i) {\n        cluster = clusters[i];\n        if (cluster.population > 0) {\n          newClustersList.push(cluster);\n        }\n      }\n      this._clusters = newClustersList;\n      this._sortClusters();\n      return this._clusters;\n    };\n    PruneCluster.prototype.RemoveMarkers = function(markers) {\n      if (!markers) {\n        this._markers = [];\n        return;\n      }\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        markers[i]._removeFlag = true;\n      }\n      var newMarkersList = [];\n      for (i = 0, l = this._markers.length; i < l; ++i) {\n        if (!this._markers[i]._removeFlag) {\n          newMarkersList.push(this._markers[i]);\n        } else {\n          delete this._markers[i]._removeFlag;\n        }\n      }\n      this._markers = newMarkersList;\n    };\n    PruneCluster.prototype.FindMarkersInArea = function(area) {\n      var aMinLat = area.minLat,\n        aMaxLat = area.maxLat,\n        aMinLng = area.minLng,\n        aMaxLng = area.maxLng,\n        markers = this._markers,\n        result = [];\n      var firstIndex = this._indexLowerBoundLng(aMinLng);\n      for (var i = firstIndex, l = markers.length; i < l; ++i) {\n        var pos = markers[i].position;\n        if (pos.lng > aMaxLng) {\n          break;\n        }\n        if (pos.lat >= aMinLat && pos.lat <= aMaxLat &&\n          pos.lng >= aMinLng) {\n          result.push(markers[i]);\n        }\n      }\n      return result;\n    };\n    PruneCluster.prototype.ComputeBounds = function(markers, withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      if (!markers || !markers.length) {\n        return null;\n      }\n      var rMinLat = Number.MAX_VALUE,\n        rMaxLat = -Number.MAX_VALUE,\n        rMinLng = Number.MAX_VALUE,\n        rMaxLng = -Number.MAX_VALUE;\n      for (var i = 0, l = markers.length; i < l; ++i) {\n        if (!withFiltered && markers[i].filtered) {\n          continue;\n        }\n        var pos = markers[i].position;\n        if (pos.lat < rMinLat)\n          rMinLat = pos.lat;\n        if (pos.lat > rMaxLat)\n          rMaxLat = pos.lat;\n        if (pos.lng < rMinLng)\n          rMinLng = pos.lng;\n        if (pos.lng > rMaxLng)\n          rMaxLng = pos.lng;\n      }\n      return {\n        minLat: rMinLat,\n        maxLat: rMaxLat,\n        minLng: rMinLng,\n        maxLng: rMaxLng\n      };\n    };\n    PruneCluster.prototype.FindMarkersBoundsInArea = function(area) {\n      return this.ComputeBounds(this.FindMarkersInArea(area));\n    };\n    PruneCluster.prototype.ComputeGlobalBounds = function(withFiltered) {\n      if (withFiltered === void 0) {\n        withFiltered = true;\n      }\n      return this.ComputeBounds(this._markers, withFiltered);\n    };\n    PruneCluster.prototype.GetMarkers = function() {\n      return this._markers;\n    };\n    PruneCluster.prototype.GetPopulation = function() {\n      return this._markers.length;\n    };\n    PruneCluster.prototype.ResetClusters = function() {\n      this._clusters = [];\n    };\n    return PruneCluster;\n  }());\n  PruneCluster_1.PruneCluster = PruneCluster;\n})(PruneCluster || (PruneCluster = {}));\nexport var PruneCluster;\n(function(PruneCluster) {})(PruneCluster || (PruneCluster = {}));\nexport var PruneClusterForLeaflet = (L.Layer ? L.Layer : L.Class).extend({\n  initialize: function(size, clusterMargin) {\n    var _this = this;\n    if (size === void 0) {\n      size = 120;\n    }\n    if (clusterMargin === void 0) {\n      clusterMargin = 20;\n    }\n    this.Cluster = new PruneCluster.PruneCluster();\n    this.Cluster.Size = size;\n    this.clusterMargin = Math.min(clusterMargin, size / 4);\n    this.Cluster.Project = function(lat, lng) {\n      return _this._map.project(new L.LatLng(lat, lng), Math.floor(_this._map.getZoom()));\n    };\n    this.Cluster.UnProject = function(x, y) {\n      return _this._map.unproject(new L.Point(x, y), Math.floor(_this._map.getZoom()));\n    };\n    this._objectsOnMap = [];\n    this.spiderfier = new PruneClusterLeafletSpiderfier(this);\n    this._hardMove = false;\n    this._resetIcons = false;\n    this._removeTimeoutId = 0;\n    this._markersRemoveListTimeout = [];\n  },\n  RegisterMarker: function(marker) {\n    this.Cluster.RegisterMarker(marker);\n  },\n  RegisterMarkers: function(markers) {\n    this.Cluster.RegisterMarkers(markers);\n  },\n  RemoveMarkers: function(markers) {\n    this.Cluster.RemoveMarkers(markers);\n  },\n  BuildLeafletCluster: function(cluster, position) {\n    var _this = this;\n    var m = new L.Marker(position, {\n      icon: this.BuildLeafletClusterIcon(cluster)\n    });\n    m._leafletClusterBounds = cluster.bounds;\n    m.on('click', function() {\n      var cbounds = m._leafletClusterBounds;\n      var markersArea = _this.Cluster.FindMarkersInArea(cbounds);\n      var b = _this.Cluster.ComputeBounds(markersArea);\n      if (b) {\n        var bounds = new L.LatLngBounds(new L.LatLng(b.minLat, b.maxLng), new L.LatLng(b.maxLat, b.minLng));\n        var zoomLevelBefore = _this._map.getZoom(),\n          zoomLevelAfter = _this._map.getBoundsZoom(bounds, false, new L.Point(20, 20));\n        if (zoomLevelAfter === zoomLevelBefore) {\n          var filteredBounds = [];\n          for (var i = 0, l = _this._objectsOnMap.length; i < l; ++i) {\n            var o = _this._objectsOnMap[i];\n            if (o.data._leafletMarker !== m) {\n              if (o.bounds.minLat >= cbounds.minLat &&\n                o.bounds.maxLat <= cbounds.maxLat &&\n                o.bounds.minLng >= cbounds.minLng &&\n                o.bounds.maxLng <= cbounds.maxLng) {\n                filteredBounds.push(o.bounds);\n              }\n            }\n          }\n          if (filteredBounds.length > 0) {\n            var newMarkersArea = [];\n            var ll = filteredBounds.length;\n            for (i = 0, l = markersArea.length; i < l; ++i) {\n              var markerPos = markersArea[i].position;\n              var isFiltered = false;\n              for (var j = 0; j < ll; ++j) {\n                var currentFilteredBounds = filteredBounds[j];\n                if (markerPos.lat >= currentFilteredBounds.minLat &&\n                  markerPos.lat <= currentFilteredBounds.maxLat &&\n                  markerPos.lng >= currentFilteredBounds.minLng &&\n                  markerPos.lng <= currentFilteredBounds.maxLng) {\n                  isFiltered = true;\n                  break;\n                }\n              }\n              if (!isFiltered) {\n                newMarkersArea.push(markersArea[i]);\n              }\n            }\n            markersArea = newMarkersArea;\n          }\n          if (markersArea.length < 200 || zoomLevelAfter >= _this._map.getMaxZoom()) {\n            _this._map.fire('overlappingmarkers', {\n              cluster: _this,\n              markers: markersArea,\n              center: m.getLatLng(),\n              marker: m\n            });\n          } else {\n            zoomLevelAfter++;\n          }\n          _this._map.setView(m.getLatLng(), zoomLevelAfter);\n        } else {\n          _this._map.fitBounds(bounds);\n        }\n      }\n    });\n    return m;\n  },\n  BuildLeafletClusterIcon: function(cluster) {\n    var c = 'prunecluster prunecluster-';\n    var iconSize = 38;\n    var maxPopulation = this.Cluster.GetPopulation();\n    if (cluster.population < Math.max(10, maxPopulation * 0.01)) {\n      c += 'small';\n    } else if (cluster.population < Math.max(100, maxPopulation * 0.05)) {\n      c += 'medium';\n      iconSize = 40;\n    } else {\n      c += 'large';\n      iconSize = 44;\n    }\n    return new L.DivIcon({\n      html: \"<div><span>\" + cluster.population + \"</span></div>\",\n      className: c,\n      iconSize: L.point(iconSize, iconSize)\n    });\n  },\n  BuildLeafletMarker: function(marker, position) {\n    var m = new L.Marker(position);\n    this.PrepareLeafletMarker(m, marker.data, marker.category);\n    return m;\n  },\n  PrepareLeafletMarker: function(marker, data, category) {\n    if (data.icon) {\n      if (typeof data.icon === 'function') {\n        marker.setIcon(data.icon(data, category));\n      } else {\n        marker.setIcon(data.icon);\n      }\n    }\n    if (data.popup) {\n      var content = typeof data.popup === 'function' ? data.popup(data, category) : data.popup;\n      if (marker.getPopup()) {\n        marker.setPopupContent(content, data.popupOptions);\n      } else {\n        marker.bindPopup(content, data.popupOptions);\n      }\n    }\n  },\n  onAdd: function(map) {\n    this._map = map;\n    map.on('movestart', this._moveStart, this);\n    map.on('moveend', this._moveEnd, this);\n    map.on('zoomend', this._zoomStart, this);\n    map.on('zoomend', this._zoomEnd, this);\n    this.ProcessView();\n    map.addLayer(this.spiderfier);\n  },\n  onRemove: function(map) {\n    map.off('movestart', this._moveStart, this);\n    map.off('moveend', this._moveEnd, this);\n    map.off('zoomend', this._zoomStart, this);\n    map.off('zoomend', this._zoomEnd, this);\n    for (var i = 0, l = this._objectsOnMap.length; i < l; ++i) {\n      map.removeLayer(this._objectsOnMap[i].data._leafletMarker);\n    }\n    this._objectsOnMap = [];\n    this.Cluster.ResetClusters();\n    map.removeLayer(this.spiderfier);\n    this._map = null;\n  },\n  _moveStart: function() {\n    this._moveInProgress = true;\n  },\n  _moveEnd: function(e) {\n    this._moveInProgress = false;\n    this._hardMove = e.hard;\n    this.ProcessView();\n  },\n  _zoomStart: function() {\n    this._zoomInProgress = true;\n  },\n  _zoomEnd: function() {\n    this._zoomInProgress = false;\n    this.ProcessView();\n  },\n  ProcessView: function() {\n    var _this = this;\n    if (!this._map || this._zoomInProgress || this._moveInProgress) {\n      return;\n    }\n    var map = this._map,\n      bounds = map.getBounds(),\n      zoom = Math.floor(map.getZoom()),\n      marginRatio = this.clusterMargin / this.Cluster.Size,\n      resetIcons = this._resetIcons;\n    var southWest = bounds.getSouthWest(),\n      northEast = bounds.getNorthEast();\n    var clusters = this.Cluster.ProcessView({\n      minLat: southWest.lat,\n      minLng: southWest.lng,\n      maxLat: northEast.lat,\n      maxLng: northEast.lng\n    });\n    var objectsOnMap = this._objectsOnMap,\n      newObjectsOnMap = [],\n      markersOnMap = new Array(objectsOnMap.length);\n    for (var i = 0, l = objectsOnMap.length; i < l; ++i) {\n      var marker = objectsOnMap[i].data._leafletMarker;\n      markersOnMap[i] = marker;\n      marker._removeFromMap = true;\n    }\n    var clusterCreationList = [];\n    var clusterCreationListPopOne = [];\n    var opacityUpdateList = [];\n    var workingList = [];\n    for (i = 0, l = clusters.length; i < l; ++i) {\n      var icluster = clusters[i],\n        iclusterData = icluster.data;\n      var latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n        lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n      for (var j = 0, ll = workingList.length; j < ll; ++j) {\n        var c = workingList[j];\n        if (c.bounds.maxLng < icluster.bounds.minLng) {\n          workingList.splice(j, 1);\n          --j;\n          --ll;\n          continue;\n        }\n        var oldMaxLng = c.averagePosition.lng + lngMargin,\n          oldMinLat = c.averagePosition.lat - latMargin,\n          oldMaxLat = c.averagePosition.lat + latMargin,\n          newMinLng = icluster.averagePosition.lng - lngMargin,\n          newMinLat = icluster.averagePosition.lat - latMargin,\n          newMaxLat = icluster.averagePosition.lat + latMargin;\n        if (oldMaxLng > newMinLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat) {\n          iclusterData._leafletCollision = true;\n          c.ApplyCluster(icluster);\n          break;\n        }\n      }\n      if (!iclusterData._leafletCollision) {\n        workingList.push(icluster);\n      }\n    }\n    clusters.forEach(function(cluster) {\n      var m = undefined;\n      var data = cluster.data;\n      if (data._leafletCollision) {\n        data._leafletCollision = false;\n        data._leafletOldPopulation = 0;\n        data._leafletOldHashCode = 0;\n        return;\n      }\n      var position = new L.LatLng(cluster.averagePosition.lat, cluster.averagePosition.lng);\n      var oldMarker = data._leafletMarker;\n      if (oldMarker) {\n        if (cluster.population === 1 && data._leafletOldPopulation === 1 && cluster.hashCode === oldMarker._hashCode) {\n          if (resetIcons || oldMarker._zoomLevel !== zoom || cluster.lastMarker.data.forceIconRedraw) {\n            _this.PrepareLeafletMarker(oldMarker, cluster.lastMarker.data, cluster.lastMarker.category);\n            if (cluster.lastMarker.data.forceIconRedraw) {\n              cluster.lastMarker.data.forceIconRedraw = false;\n            }\n          }\n          oldMarker.setLatLng(position);\n          m = oldMarker;\n        } else if (cluster.population > 1 && data._leafletOldPopulation > 1 && (oldMarker._zoomLevel === zoom ||\n            data._leafletPosition.equals(position))) {\n          oldMarker.setLatLng(position);\n          if (resetIcons || cluster.population != data._leafletOldPopulation ||\n            cluster.hashCode !== data._leafletOldHashCode) {\n            var boundsCopy = {};\n            L.Util.extend(boundsCopy, cluster.bounds);\n            oldMarker._leafletClusterBounds = boundsCopy;\n            oldMarker.setIcon(_this.BuildLeafletClusterIcon(cluster));\n          }\n          data._leafletOldPopulation = cluster.population;\n          data._leafletOldHashCode = cluster.hashCode;\n          m = oldMarker;\n        }\n      }\n      if (!m) {\n        if (cluster.population === 1) {\n          clusterCreationListPopOne.push(cluster);\n        } else {\n          clusterCreationList.push(cluster);\n        }\n        data._leafletPosition = position;\n        data._leafletOldPopulation = cluster.population;\n        data._leafletOldHashCode = cluster.hashCode;\n      } else {\n        m._removeFromMap = false;\n        newObjectsOnMap.push(cluster);\n        m._zoomLevel = zoom;\n        m._hashCode = cluster.hashCode;\n        m._population = cluster.population;\n        data._leafletMarker = m;\n        data._leafletPosition = position;\n      }\n    });\n    clusterCreationList = clusterCreationListPopOne.concat(clusterCreationList);\n    for (i = 0, l = objectsOnMap.length; i < l; ++i) {\n      icluster = objectsOnMap[i];\n      var idata = icluster.data;\n      marker = idata._leafletMarker;\n      if (idata._leafletMarker._removeFromMap) {\n        var remove = true;\n        if (marker._zoomLevel === zoom) {\n          var pa = icluster.averagePosition;\n          latMargin = (icluster.bounds.maxLat - icluster.bounds.minLat) * marginRatio,\n            lngMargin = (icluster.bounds.maxLng - icluster.bounds.minLng) * marginRatio;\n          for (j = 0, ll = clusterCreationList.length; j < ll; ++j) {\n            var jcluster = clusterCreationList[j],\n              jdata = jcluster.data;\n            if (marker._population === 1 && jcluster.population === 1 &&\n              marker._hashCode === jcluster.hashCode) {\n              if (resetIcons || jcluster.lastMarker.data.forceIconRedraw) {\n                this.PrepareLeafletMarker(marker, jcluster.lastMarker.data, jcluster.lastMarker.category);\n                if (jcluster.lastMarker.data.forceIconRedraw) {\n                  jcluster.lastMarker.data.forceIconRedraw = false;\n                }\n              }\n              marker.setLatLng(jdata._leafletPosition);\n              remove = false;\n            } else {\n              var pb = jcluster.averagePosition;\n              var oldMinLng = pa.lng - lngMargin,\n                newMaxLng = pb.lng + lngMargin;\n              oldMaxLng = pa.lng + lngMargin;\n              oldMinLat = pa.lat - latMargin;\n              oldMaxLat = pa.lat + latMargin;\n              newMinLng = pb.lng - lngMargin;\n              newMinLat = pb.lat - latMargin;\n              newMaxLat = pb.lat + latMargin;\n              if ((marker._population > 1 && jcluster.population > 1) &&\n                (oldMaxLng > newMinLng && oldMinLng < newMaxLng && oldMaxLat > newMinLat && oldMinLat < newMaxLat)) {\n                marker.setLatLng(jdata._leafletPosition);\n                marker.setIcon(this.BuildLeafletClusterIcon(jcluster));\n                var poisson = {};\n                L.Util.extend(poisson, jcluster.bounds);\n                marker._leafletClusterBounds = poisson;\n                jdata._leafletOldPopulation = jcluster.population;\n                jdata._leafletOldHashCode = jcluster.hashCode;\n                marker._population = jcluster.population;\n                remove = false;\n              }\n            }\n            if (!remove) {\n              jdata._leafletMarker = marker;\n              marker._removeFromMap = false;\n              newObjectsOnMap.push(jcluster);\n              clusterCreationList.splice(j, 1);\n              --j;\n              --ll;\n              break;\n            }\n          }\n        }\n        if (remove) {\n          if (!marker._removeFromMap)\n            console.error(\"wtf\");\n        }\n      }\n    }\n    for (i = 0, l = clusterCreationList.length; i < l; ++i) {\n      icluster = clusterCreationList[i],\n        idata = icluster.data;\n      var iposition = idata._leafletPosition;\n      var creationMarker;\n      if (icluster.population === 1) {\n        creationMarker = this.BuildLeafletMarker(icluster.lastMarker, iposition);\n      } else {\n        creationMarker = this.BuildLeafletCluster(icluster, iposition);\n      }\n      creationMarker.addTo(map);\n      creationMarker.setOpacity(0);\n      opacityUpdateList.push(creationMarker);\n      idata._leafletMarker = creationMarker;\n      creationMarker._zoomLevel = zoom;\n      creationMarker._hashCode = icluster.hashCode;\n      creationMarker._population = icluster.population;\n      newObjectsOnMap.push(icluster);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = opacityUpdateList.length; i < l; ++i) {\n        var m = opacityUpdateList[i];\n        if (m._icon)\n          L.DomUtil.addClass(m._icon, \"prunecluster-anim\");\n        if (m._shadow)\n          L.DomUtil.addClass(m._shadow, \"prunecluster-anim\");\n        m.setOpacity(1);\n      }\n    }, 1);\n    if (this._hardMove) {\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          map.removeLayer(marker);\n        }\n      }\n    } else {\n      if (this._removeTimeoutId !== 0) {\n        window.clearTimeout(this._removeTimeoutId);\n        for (i = 0, l = this._markersRemoveListTimeout.length; i < l; ++i) {\n          map.removeLayer(this._markersRemoveListTimeout[i]);\n        }\n      }\n      var toRemove = [];\n      for (i = 0, l = markersOnMap.length; i < l; ++i) {\n        marker = markersOnMap[i];\n        if (marker._removeFromMap) {\n          marker.setOpacity(0);\n          toRemove.push(marker);\n        }\n      }\n      if (toRemove.length > 0) {\n        this._removeTimeoutId = window.setTimeout(function() {\n          for (i = 0, l = toRemove.length; i < l; ++i) {\n            map.removeLayer(toRemove[i]);\n          }\n          _this._removeTimeoutId = 0;\n        }, 300);\n      }\n      this._markersRemoveListTimeout = toRemove;\n    }\n    this._objectsOnMap = newObjectsOnMap;\n    this._hardMove = false;\n    this._resetIcons = false;\n  },\n  FitBounds: function(withFiltered) {\n    if (withFiltered === void 0) {\n      withFiltered = true;\n    }\n    var bounds = this.Cluster.ComputeGlobalBounds(withFiltered);\n    if (bounds) {\n      this._map.fitBounds(new L.LatLngBounds(new L.LatLng(bounds.minLat, bounds.maxLng), new L.LatLng(bounds.maxLat, bounds.minLng)));\n    }\n  },\n  GetMarkers: function() {\n    return this.Cluster.GetMarkers();\n  },\n  RedrawIcons: function(processView) {\n    if (processView === void 0) {\n      processView = true;\n    }\n    this._resetIcons = true;\n    if (processView) {\n      this.ProcessView();\n    }\n  }\n});\nexport var PruneClusterLeafletSpiderfier = (L.Layer ? L.Layer : L.Class).extend({\n  _2PI: Math.PI * 2,\n  _circleFootSeparation: 25,\n  _circleStartAngle: Math.PI / 6,\n  _spiralFootSeparation: 28,\n  _spiralLengthStart: 11,\n  _spiralLengthFactor: 5,\n  _spiralCountTrigger: 8,\n  spiderfyDistanceMultiplier: 1,\n  initialize: function(cluster) {\n    this._cluster = cluster;\n    this._currentMarkers = [];\n    this._multiLines = !!L.multiPolyline;\n    this._lines = this._multiLines ?\n      L.multiPolyline([], {\n        weight: 1.5,\n        color: '#222'\n      }) :\n      L.polyline([], {\n        weight: 1.5,\n        color: '#222'\n      });\n  },\n  onAdd: function(map) {\n    this._map = map;\n    this._map.on('overlappingmarkers', this.Spiderfy, this);\n    this._map.on('click', this.Unspiderfy, this);\n    this._map.on('zoomend', this.Unspiderfy, this);\n  },\n  Spiderfy: function(data) {\n    var _this = this;\n    if (data.cluster !== this._cluster) {\n      return;\n    }\n    this.Unspiderfy();\n    var markers = data.markers.filter(function(marker) {\n      return !marker.filtered;\n    });\n    this._currentCenter = data.center;\n    var centerPoint = this._map.latLngToLayerPoint(data.center);\n    var points;\n    if (markers.length >= this._spiralCountTrigger) {\n      points = this._generatePointsSpiral(markers.length, centerPoint);\n    } else {\n      if (this._multiLines) {\n        centerPoint.y += 10;\n      }\n      points = this._generatePointsCircle(markers.length, centerPoint);\n    }\n    var polylines = [];\n    var leafletMarkers = [];\n    var projectedPoints = [];\n    for (var i = 0, l = points.length; i < l; ++i) {\n      var pos = this._map.layerPointToLatLng(points[i]);\n      var m = this._cluster.BuildLeafletMarker(markers[i], data.center);\n      m.setZIndexOffset(5000);\n      m.setOpacity(0);\n      this._currentMarkers.push(m);\n      this._map.addLayer(m);\n      leafletMarkers.push(m);\n      projectedPoints.push(pos);\n    }\n    window.setTimeout(function() {\n      for (i = 0, l = points.length; i < l; ++i) {\n        leafletMarkers[i].setLatLng(projectedPoints[i])\n          .setOpacity(1);\n      }\n      var startTime = +new Date();\n      var interval = 42,\n        duration = 290;\n      var anim = window.setInterval(function() {\n        polylines = [];\n        var now = +new Date();\n        var d = now - startTime;\n        if (d >= duration) {\n          window.clearInterval(anim);\n          stepRatio = 1.0;\n        } else {\n          var stepRatio = d / duration;\n        }\n        var center = data.center;\n        for (i = 0, l = points.length; i < l; ++i) {\n          var p = projectedPoints[i],\n            diffLat = p.lat - center.lat,\n            diffLng = p.lng - center.lng;\n          polylines.push([center, new L.LatLng(center.lat + diffLat * stepRatio, center.lng + diffLng * stepRatio)]);\n        }\n        _this._lines.setLatLngs(polylines);\n      }, interval);\n    }, 1);\n    this._lines.setLatLngs(polylines);\n    this._map.addLayer(this._lines);\n    if (data.marker) {\n      this._clusterMarker = data.marker.setOpacity(0.3);\n    }\n  },\n  _generatePointsCircle: function(count, centerPt) {\n    var circumference = this.spiderfyDistanceMultiplier * this._circleFootSeparation * (2 + count),\n      legLength = circumference / this._2PI,\n      angleStep = this._2PI / count,\n      res = [],\n      i, angle;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle = this._circleStartAngle + i * angleStep;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n    }\n    return res;\n  },\n  _generatePointsSpiral: function(count, centerPt) {\n    var legLength = this.spiderfyDistanceMultiplier * this._spiralLengthStart,\n      separation = this.spiderfyDistanceMultiplier * this._spiralFootSeparation,\n      lengthFactor = this.spiderfyDistanceMultiplier * this._spiralLengthFactor,\n      angle = 0,\n      res = [],\n      i;\n    res.length = count;\n    for (i = count - 1; i >= 0; i--) {\n      angle += separation / legLength + i * 0.0005;\n      res[i] = new L.Point(Math.round(centerPt.x + legLength * Math.cos(angle)), Math.round(centerPt.y + legLength * Math.sin(angle)));\n      legLength += this._2PI * lengthFactor / angle;\n    }\n    return res;\n  },\n  Unspiderfy: function() {\n    var _this = this;\n    for (var i = 0, l = this._currentMarkers.length; i < l; ++i) {\n      this._currentMarkers[i].setLatLng(this._currentCenter).setOpacity(0);\n    }\n    var markers = this._currentMarkers;\n    window.setTimeout(function() {\n      for (i = 0, l = markers.length; i < l; ++i) {\n        _this._map.removeLayer(markers[i]);\n      }\n    }, 300);\n    this._currentMarkers = [];\n    this._map.removeLayer(this._lines);\n    if (this._clusterMarker) {\n      this._clusterMarker.setOpacity(1);\n    }\n  },\n  onRemove: function(map) {\n    this.Unspiderfy();\n    map.off('overlappingmarkers', this.Spiderfy, this);\n    map.off('click', this.Unspiderfy, this);\n    map.off('zoomend', this.Unspiderfy, this);\n  }\n});\n\n\n// export PruneClusterForLeaflet\n\nexport default PruneCluster\n","import React from 'react'\nimport {Map, TileLayer} from 'react-leaflet'\n\nimport {navigate} from '@reach/router'\nimport {\n\tloadMarkers as query_loadMarkers,\n} from '../queries.js'\n\nimport './index.css'\n// import '../conic-gradient-polyfill.js'\n\n// import categories from '../data/dist/categories.json'\nimport presets from '../data/dist/presets.json'\nimport colors from '../data/dist/colors.json'\nimport colorsByPreset from '../data/dist/colorsByPreset.json'\nimport {getPreset, getColorByPreset, getWantedTagsList} from '../functions.js'\n\n// import {\n// \tIcon,\n// } from '@material-ui/core'\n\n\nimport L from 'leaflet'\nimport './leaflet/leaflet.css'\n\nimport {PruneCluster, PruneClusterForLeaflet} from './PruneCluster_dist/PruneCluster.js'\n\nPruneCluster.Cluster.ENABLE_MARKERS_LIST = true\n\nexport default class PageMap extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tdocs: [],\n\t\t\tbounds: null,\n\t\t}\n\n\t\tthis.filters = null\n\n\t\t// this.MarkerLayerRef = React.createRef()\n\t\tthis.map = null\n\t\tthis.markers = []\n\n\t\tthis.showPlace = this.showPlace.bind(this)\n\t\tthis.gotMapRef = this.gotMapRef.bind(this)\n\n\t\tthis.createPruneCluster = this.createPruneCluster.bind(this)\n\t\tthis.addMarkersToPruneCluster = this.addMarkersToPruneCluster.bind(this)\n\t\tthis.filterMarkers = this.filterMarkers.bind(this)\n\t\tthis.showAllMarkers = this.showAllMarkers.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadMarkers()\n\n\t\tif (this.props.onFunctions) {\n\t\t\tthis.props.onFunctions({\n\t\t\t\tgetZoom: () => this.map.getZoom(),\n\t\t\t\tgetCenter: () => this.map.getCenter(),\n\t\t\t\tgetBounds: () => this.map.getBounds(),\n\t\t\t\tflyToBounds: (...attr) => this.map.flyToBounds(...attr),\n\t\t\t\tsetView: (...attr) => this.map.setView(...attr),\n\t\t\t\tpanTo: (...attr) => this.map.panTo(...attr),\n\t\t\t\tflyTo: (...attr) => this.map.flyTo(...attr),\n\t\t\t\tinvalidateSize: (...attr) => this.map.invalidateSize(...attr),\n\t\t\t})\n\t\t}\n\t}\n\tcomponentDidUpdate(){\n\t\tif (this.props.filters !== this.filters) {\n\t\t\tthis.filters = this.props.filters\n\t\t\tthis.filterMarkers(this.filters)\n\t\t}\n\t}\n\n\tloadMarkers(){\n\t\twindow.graphql.query({\n\t\t\tquery: query_loadMarkers,\n\t\t\tvariables: {\n\t\t\t\twantedTags: ['min_age','max_age',...getWantedTagsList(presets)], // this gets us about 11% reduction in size\n\t\t\t},\n\t\t}).then(result => {\n\t\t\tconst docs = result.data.getMarkers.map(doc=>{\n\t\t\t\tdoc.___preset = getPreset(doc.tags || {}, presets)\n\t\t\t\tdoc.___color = getColorByPreset(doc.___preset.key,colorsByPreset) || colors.default\n\t\t\t\treturn doc\n\t\t\t})\n\n\t\t\tthis.docs = docs\n\t\t\tthis.addMarkersToPruneCluster(docs)\n\n\t\t\t// 1756241 100%\n\t\t\t// 1556529  80%\n\t\t\t//  679779  40%\n\t\t\t//   69580   4%\n\n\t\t}).catch(error=>{\n\t\t\tconsole.error(error)\n\t\t})\n\t}\n\n\tasync showPlace(doc) {\n\t\tconst center = this.map.getCenter()\n\t\tconsole.log('center-map', center)\n\n\t\tawait navigate(`/place/${doc._id}/`)\n\t\tif (this.props.onViewDoc) {\n\t\t\tthis.props.onViewDoc(doc._id)\n\t\t}\n\t}\n\n\tgotMapRef(Map){\n\t\tthis.mapRef = Map\n\t\tthis.map = Map.leafletElement\n\n\t\tthis.createPruneCluster()\n\t}\n\n\tgetConicGradient(values){\n\t\tlet stops = []\n\n\t\tif (values.length === 1) {\n\t\t\tstops = [values[0][0]+' 0']\n\t\t}else{\n\t\t\tlet counter = 0\n\t\t\tlet currentPos = 0\n\t\t\tfor (const pair of values) {\n\t\t\t\tcurrentPos += 5\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\tstops.push('white '+currentPos+'deg')\n\t\t\t\t}else{\n\t\t\t\t\tstops.push('white 0 '+currentPos+'deg')\n\t\t\t\t}\n\t\n\t\t\t\tif (counter === values.length-1) {\n\t\t\t\t\tstops.push(pair[0]+' 0')\n\t\t\t\t}else{\n\t\t\t\t\tcurrentPos += Math.ceil(pair[1]*360)\n\t\t\t\t\tstops.push(pair[0]+' 0 '+currentPos+'deg')\n\t\t\t\t}\n\n\t\t\t\tcounter += 1\n\t\t\t}\n\t\t}\n\t\tstops = stops.join(', ')\n\n\t\tvar gradient = new window.ConicGradient({\n\t\t    stops: stops, // \"gold 40%, #f06 0\", // required\n\t\t    repeating: false, // Default: false\n\t\t    size: 100, // Default: Math.max(innerWidth, innerHeight)\n\t\t})\n\n\t\treturn gradient\n\t}\n\n\tcreatePruneCluster(){\n\t\tthis.clusterGroup = new PruneClusterForLeaflet()\n\t\tthis.clusterGroup.Cluster.Size = 120\n\n\t\tthis.clusterGroup.BuildLeafletCluster = (cluster, position)=>{\n\t\t\tconst marker = new L.Marker(position, {\n\t\t\t\ticon: this.clusterGroup.BuildLeafletClusterIcon(cluster),\n\t\t\t})\n\t\t\n\t\t\tmarker.on('click', ()=>{\n\t\t\t\t// Compute the cluster bounds (it's slow : O(n))\n\t\t\t\tconst markersArea = this.clusterGroup.Cluster.FindMarkersInArea(cluster.bounds)\n\t\t\t\tconst clusterBounds = this.clusterGroup.Cluster.ComputeBounds(markersArea)\n\t\t\n\t\t\t\tif (clusterBounds) {\n\t\t\t\t\tconst bounds = new L.LatLngBounds(\n\t\t\t\t\t\tnew L.LatLng(clusterBounds.minLat, clusterBounds.maxLng),\n\t\t\t\t\t\tnew L.LatLng(clusterBounds.maxLat, clusterBounds.minLng)\n\t\t\t\t\t)\n\t\t\n\t\t\t\t\tconst zoomLevelBefore = this.clusterGroup._map.getZoom()\n\t\t\t\t\tconst zoomLevelAfter = this.clusterGroup._map.getBoundsZoom(bounds, false, new L.Point(20, 20, null))\n\t\t\n\t\t\t\t\t// If the zoom level doesn't change\n\t\t\t\t\tif (zoomLevelAfter === zoomLevelBefore) {\n\t\t\t\t\t\t// Send an event for the LeafletSpiderfier\n\t\t\t\t\t\tthis.clusterGroup._map.fire('overlappingmarkers', {\n\t\t\t\t\t\t\tcluster: this.clusterGroup,\n\t\t\t\t\t\t\tmarkers: markersArea,\n\t\t\t\t\t\t\tcenter: marker.getLatLng(),\n\t\t\t\t\t\t\tmarker: marker,\n\t\t\t\t\t\t})\n\t\t\n\t\t\t\t\t\tthis.clusterGroup._map.flyTo(position, zoomLevelAfter, {\n\t\t\t\t\t\t\tanimate: true,\n\t\t\t\t\t\t\tduration: 0.75,\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.clusterGroup._map.flyToBounds(bounds, {\n\t\t\t\t\t\t\tanimate: true,\n\t\t\t\t\t\t\tduration: 0.75,\n\t\t\t\t\t\t\t// padding: [100,100],\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\n\t\t\treturn marker\n\t\t}\n\n\t\tthis.clusterGroup.PrepareLeafletMarker = (leafletMarker, doc)=>{\n\t\t\tleafletMarker.setIcon(L.divIcon({\n\t\t\t\thtml: `\n\t\t\t\t\t<div class=\"wrapper material-icons-round\" style=\"--bg-color:${doc.___color.bg};--fg-color:${doc.___color.fg};\">${doc.___preset.icon ? doc.___preset.icon.toLowerCase() : ''}</div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'marker-custom-icon',\n\t\t\t\ticonSize: L.point(40, 40, true),\n\t\t\t}))\n\t\t\t\n\t\t\tif (doc.name !== '') {\n\t\t\t\tleafletMarker.bindTooltip(doc.name, {\n\t\t\t\t\tsticky: true,\n\t\t\t\t\tinteractive: false,\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tpermanent: false,\n\t\t\t\t})\n\t\t\t}\n\t\t\n\t\t\tleafletMarker.on('click', ()=>this.showPlace(doc))\n\t\t}\n\n\t\tthis.clusterGroup.BuildLeafletClusterIcon = cluster=>{\n\t\t\tconst colors = Object.entries(cluster.GetClusterMarkers()\n\t\t\t\t.filter(m=>!!m.data.___color.key && m.data.___color.key !== 'white')\n\t\t\t\t.map(m=>m.data.___color.bg)\n\t\t\t\t.reduce((obj,preset_key)=>{\n\t\t\t\t\tif (!(!!obj[preset_key])) {\n\t\t\t\t\t\tobj[preset_key] = 0\n\t\t\t\t\t}\n\t\t\t\t\tobj[preset_key] += 1\n\t\t\t\t\treturn obj\n\t\t\t\t},{})\n\t\t\t).sort((a,b)=>a[1]-b[1])\n\t\n\t\t\tconst colors_sum = colors.reduce((sum,pair) => sum+pair[1], 0)\n\t\n\t\t\tconst gradient = this.getConicGradient(colors.map(pair=>{\n\t\t\t\treturn [pair[0] , pair[1]/colors_sum]\n\t\t\t}))\n\t\n\t\t\treturn L.divIcon({\n\t\t\t\thtml: `\n\t\t\t\t\t<div class=\"number\">${cluster.population}</div>\n\t\t\t\t\t<div class=\"pieChart\" style=\"background-image:url(${gradient.dataURL});\"></div>\n\t\t\t\t`,\n\t\t\t\tclassName: 'marker-cluster-custom-icon',\n\t\t\t\ticonSize: L.point(48, 48, true),\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.map.addLayer(this.clusterGroup)\n\t}\n\taddMarkersToPruneCluster(docs){\n\t\tthis.markers = []\n\t\tthis.clusterGroup.RemoveMarkers()\n\n\t\tfor (const doc of docs) {\n\t\t\tlet marker = new PruneCluster.Marker(doc.lat, doc.lng, doc)\n\t\t\tmarker.filtered = false\n\t\t\tthis.markers.push(marker)\n\t\t\tthis.clusterGroup.RegisterMarker(marker)\n\t\t}\n\n\t\tthis.clusterGroup.ProcessView()\n\t\tthis.map.invalidateSize(false)\n\n\t\tthis.filterMarkers(this.filters)\n\t}\n\n\tshowAllMarkers(){\n\t\tconst markers_length = this.markers.length\n\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\tthis.markers[i].filtered = false\n\t\t}\n\t\tthis.clusterGroup.ProcessView()\n\t}\n\tfilterMarkers(filters){\n\t\t\tif (!!this.filters) {\n\t\t\t\tconst presets = this.filters.presets || []\n\t\t\t\t// const presets = ['amenity/community_centre']\n\t\t\t\tconst presets_length = presets.length\n\n\t\t\t\tconst selectedAge = this.filters.selectedAge\n\t\t\t\tconst ageOption = this.filters.ageOption\n\n\t\t\t\tif (presets_length > 0 || !!selectedAge) {\n\t\t\t\t\tconst markers_length = this.markers.length\n\t\t\t\t\tfor (let i = markers_length - 1; i >= 0; i--) {\n\t\t\t\t\t\tconst marker = this.markers[i]\n\n\t\t\t\t\t\tlet isInPresets = true\n\t\t\t\t\t\tif (presets_length > 0) {\n\t\t\t\t\t\t\tisInPresets = presets.map(preset_key=>{\n\t\t\t\t\t\t\t\treturn marker.data.___preset.key.startsWith(preset_key)\n\t\t\t\t\t\t\t}).reduce((bool,value) => (value ? true : bool), false)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet isInAgeRange = true\n\t\t\t\t\t\tif (!!selectedAge) {\n\t\t\t\t\t\t\tisInAgeRange = false\n\t\t\t\t\t\t\tif (ageOption!=='open_end' && !!marker.data.tags.min_age && !!marker.data.tags.max_age) {\n\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\tisInAgeRange = (\n\t\t\t\t\t\t\t\t\t   (!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t\t&& (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tif (!!marker.data.tags.min_age) {\n\t\t\t\t\t\t\t\t\tconst parsedMin = Number.parseFloat(marker.data.tags.min_age)\n\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMin) && parsedMin <= selectedAge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (isInAgeRange && !!marker.data.tags.max_age) {\n\t\t\t\t\t\t\t\t\tconst parsedMax = Number.parseFloat(marker.data.tags.max_age)\n\t\t\t\t\t\t\t\t\tisInAgeRange = (!Number.isNaN(parsedMax) && parsedMax >= selectedAge)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.markers[i].filtered = !(isInPresets && isInAgeRange)\n\t\t\t\t\t}\n\t\t\t\t\tthis.clusterGroup.ProcessView()\n\t\t\t\t}else{\n\t\t\t\t\tthis.showAllMarkers()\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.showAllMarkers()\n\t\t\t}\n\t}\n\n\t// getMaxClusterRadius(zoomLevel){\n\t// \tif (zoomLevel<5) {\n\t// \t\treturn 80\n\t// \t} else if (zoomLevel<6) {\n\t// \t\treturn 120\n\t// \t}  else if (zoomLevel<9) {\n\t// \t\treturn 100\n\t// \t} else if (zoomLevel<11) {\n\t// \t\treturn 80\n\t// \t} else if (zoomLevel<16) {\n\t// \t\treturn 60\n\t// \t} else if (zoomLevel<22) {\n\t// \t\treturn 20\n\t// \t}\n\t//\n\t// \treturn 80\n\t// }\n\n\trender() {\n\t\t// <ZoomControl position=\"bottomright\" />\n\n\t\treturn (<div className={this.props.className}>\n\t\t\t<Map\n\t\t\t\tref={this.gotMapRef}\n\t\t\t\tclassName=\"map\"\n\n\t\t\t\tpreferCanvas={true}\n\t\t\t\tuseFlyTo={true}\n\t\t\t\tbounds={this.state.bounds}\n\t\t\t\tcenter={[51,10]}\n\t\t\t\tminZoom={2}\n\t\t\t\tzoom={1}\n\t\t\t\tmaxZoom={19}\n\t\t\t\tzoomSnap={1}\n\t\t\t\tzoomControl={false}\n\n\t\t\t\tfadeAnimation={false}\n\n\t\t\t\tworldCopyJump={true}\n\t\t\t\tmaxBoundsViscosity={1.0}\n\n\t\t\t\tmaxBounds={[[-180,99999],[180,-99999]]}\n\t\t\t>\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_english_labels\"\n\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\tattribution='<a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">&copy; MapBox</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">&copy; OpenStreetMap contributors</a>'\n\t\t\t\t\turl={\"https://api.mapbox.com/styles/v1/petacat/ck7h7qgtg4c4b1ikiifin5it7/tiles/256/{z}/{x}/{y}{r}?access_token=pk.eyJ1IjoicGV0YWNhdCIsImEiOiJjaWl0MGpqOHEwM2VhdTZrbmhsNG96MjFrIn0.Uhlmj9xPIaPK_3fLUm4nIw\"}\n\t\t\t\t/>*/}\n\t\t\t\t<TileLayer\n\t\t\t\t\tkey=\"tilelayer_international_lables\"\n\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\tattribution='<a href=\"https://www.mapbox.com/about/maps/\" target=\"_blank\" rel=\"noreferrer\">&copy; MapBox</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">&copy; OpenStreetMap contributors</a>'\n\t\t\t\t\turl={\"https://api.mapbox.com/styles/v1/qiekub/ck8aum3p70aa51in4ikxao8ii/tiles/256/{z}/{x}/{y}{r}?access_token=pk.eyJ1IjoicWlla3ViIiwiYSI6ImNrOGF1ZGlpdzA1dDgzamx2ajNua3picmMifQ.OYr_o4fX7vPTvZCWZsUs4g\"}\n\t\t\t\t/>\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_stamen_watercolor\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tdetectRetina={window.devicePixelRatio > 1}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n\t\t\t\t\turl=\"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png\"\n\t\t\t\t/>*/}\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_openstreetmap\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tdetectRetina={window.devicePixelRatio > 1}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors'\n\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\t\t\t\t/>*/}\n\t\t\t\t{/*<TileLayer\n\t\t\t\t\tkey=\"tilelayer_CartoDB_Voyager\"\n\t\t\t\t\tmaxZoom={19}\n\t\t\t\t\tsubdomains=\"abcd\"\n\t\t\t\t\tdetectRetina={false}\n\t\t\t\t\tattribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\" rel=\"noreferrer\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\" target=\"_blank\" rel=\"noreferrer\">CARTO</a>'\n\t\t\t\t\turl=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n\t\t\t\t/>*/}\n\t\t\t</Map>\n\t\t</div>)\n\t}\n}\n","import React from 'react'\n// import './index.css'\n\nimport {\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\tDivider,\n} from '@material-ui/core'\n\nimport {\n\tHistoryRounded as HistoryIcon,\n\t// ContactSupportRounded as ContactSupportIcon,\n\tFullscreenRounded as FullscreenIcon,\n\tFullscreenExitRounded as FullscreenExitIcon,\n} from '@material-ui/icons'\n\n// WhatsApp\n\nconst ListItemLink = props => <ListItem button component=\"a\" {...props} />\n\nexport default class MainDrawerContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\twindowIsFullscreen: false,\n\t\t}\n\n\t\tthis.toogleFullscreen = this.toogleFullscreen.bind(this)\n\t}\n\n\ttoogleFullscreen(){\n\t\tif (document.fullscreenEnabled) {\n\t\t\tif (document.fullscreenElement === null) {\n\t\t\t\tdocument.querySelector('body').requestFullscreen().then(()=>{\n\t\t\t\t\tthis.setState({windowIsFullscreen:true})\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tdocument.exitFullscreen().then(()=>{\n\t\t\t\t\tthis.setState({windowIsFullscreen:false})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (<>\n\t\t\t<List>\n\t\t\t\t<ListItemLink>\n\t\t\t\t\t<ListItemIcon><HistoryIcon style={{color:'black'}} /></ListItemIcon>\n\t\t\t\t\t<ListItemText primary=\"Changes Under Review\" />\n\t\t\t\t</ListItemLink>\n\t\t\t</List>\n\t\t\t<Divider />\n\t\t\t<List>\n\t\t\t\t<ListItemLink>\n\t\t\t\t\t<ListItemText primary=\"Imprint + Privacy Policy\" />\n\t\t\t\t</ListItemLink>\n\t\t\t\t<ListItemLink>\n\t\t\t\t\t<ListItemText primary=\"Contact\" />\n\t\t\t\t</ListItemLink>\n\t\t\t</List>\n\t\t\t<Divider />\n\t\t\t<List>\n\t\t\t\t{document.fullscreenEnabled ? (<ListItem button onClick={this.toogleFullscreen}>\n\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t{this.state.windowIsFullscreen ? <FullscreenExitIcon style={{color:'black'}} /> : <FullscreenIcon style={{color:'black'}} />}\n\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t<ListItemText primary={this.state.windowIsFullscreen ? 'Exit Fullscreen' : 'Enter Fullscreen'} />\n\t\t\t\t</ListItem>) : null}\n\t\t\t</List>\n\t\t</>)\n\t}\n}\n\n\n\n","import React from 'react'\nimport './index.css'\n\nimport {navigate} from '@reach/router'\n\nimport {\n\tPaper,\n\tInputBase,\n\tIconButton,\n\tDrawer,\n} from '@material-ui/core'\n\nimport {\n\tSearchRounded as SearchIcon,\n\tHourglassEmptyRounded as HourglassEmptyIcon,\n\tCloseRounded as CloseIcon,\n\tMenuRounded as MenuIcon,\n} from '@material-ui/icons'\n\nimport MainDrawerContent from '../MainDrawerContent/index.js'\n\nexport default class SearchBar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tvalue: '',\n\t\t\tloadingSearchResult: false,\n\t\t\tisMainDrawerOpen: false,\n\t\t}\n\n\t\tthis.submitTheSearchQuery = this.submitTheSearchQuery.bind(this)\n\t\tthis.saveSearchQueryText = this.saveSearchQueryText.bind(this)\n\t\tthis.searchKeypressed = this.searchKeypressed.bind(this)\n\t\tthis.closeSidebar = this.closeSidebar.bind(this)\n\t\tthis.toggleMainDrawer = this.toggleMainDrawer.bind(this)\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.value !== this.state.value) {\n\t\t\tthis.setState({value: this.props.value})\n\t\t}\n\t}\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tif (\n\t\t\tthis.props.value !== prevProps.value &&\n\t\t\tthis.props.value !== this.state.value\n\t\t) {\n\t\t\tthis.setState({value: this.props.value})\n\t\t}\n\t}\n\tsaveSearchQueryText(event){\n\t\tthis.setState({value: event.target.value})\n\t}\n\n\tsubmitTheSearchQuery(){\n\t\tif (this.props.onStartSearch) {\n\t\t\tthis.setState({loadingSearchResult:true}, ()=>{\n\t\t\t\tthis.props.onStartSearch(this.state.value, ()=>{\n\t\t\t\t\tthis.setState({loadingSearchResult:false})\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}\n\tsearchKeypressed(event){\n\t\tif (event.key === 'Enter') {\n\t\t\tthis.submitTheSearchQuery()\n\t\t}\n\t}\n\n\tasync closeSidebar(){\n\t\tawait navigate(`/`)\n\n\t\tthis.setState({value: ''}, ()=>{\n\t\t\tif (this.props.onSetSidebarIsOpen) {\n\t\t\t\tthis.props.onSetSidebarIsOpen(false)\n\t\t\t}\n\t\t\tif (this.props.onSetSearchBarValue) {\n\t\t\t\tthis.props.onSetSearchBarValue('')\n\t\t\t}\n\t\t})\n\t}\n\n\ttoggleMainDrawer(){\n\t\tthis.setState((state,props)=>{\n\t\t\treturn {isMainDrawerOpen:!state.isMainDrawerOpen}\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (<div className={this.props.className}>\n\t\t\t<Drawer\n\t\t\t\topen={this.state.isMainDrawerOpen}\n\t\t\t\tonClose={this.toggleMainDrawer}\n\t\t\t>\n\t\t\t\t<MainDrawerContent />\n\t\t\t</Drawer>\n\n\t\t\t<Paper\n\t\t\t\tclassName={'header '+(this.props.sidebarIsOpen ? 'sidebarIsOpen' : '')}\n\t\t\t\televation={(this.props.sidebarIsOpen ? 6 : 6)}\n\t\t\t\tvariant=\"elevation\"\n\t\t\t>\n\t\t\t\t<IconButton edge=\"end\" style={{margin:'4px',padding:'10px'}} aria-label=\"menu\" onClick={this.toggleMainDrawer}>\n\t\t\t\t\t<MenuIcon style={{color:'black'}} />\n\t\t\t\t</IconButton>\n\t\t\t\t<InputBase\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\theight: '52px',\n\t\t\t\t\t\tpadding: '', // '0 4px 0 16px', // '0 4px',\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t}}\n\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\tplaceholder=\"Search For Queerness!\"\n\t\t\t\t\tinputProps={{'aria-label': 'search input'}}\n\t\t\t\t\tonChange={this.saveSearchQueryText}\n\t\t\t\t\tonKeyPress={this.searchKeypressed}\n\n\t\t\t\t\tdisabled={this.props.sidebarIsOpen}\n\t\t\t\t/>\n\t\t\t\t{(\n\t\t\t\t\tthis.props.sidebarIsOpen\n\t\t\t\t\t?\n\t\t\t\t\t<IconButton style={{margin:'4px',padding:'10px'}} aria-label=\"close\" onClick={this.closeSidebar}>\n\t\t\t\t\t\t<CloseIcon style={{color:'black'}} />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t:\n\t\t\t\t\t<IconButton type=\"submit\" style={{margin:'4px',padding:'10px'}} aria-label=\"search\" onClick={this.submitTheSearchQuery}>\n\t\t\t\t\t\t{(\n\t\t\t\t\t\t\tthis.state.loadingSearchResult\n\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t<HourglassEmptyIcon style={{color:'black'}} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<SearchIcon style={{color:'black'}} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</IconButton>\n\t\t\t\t)}\n\t\t\t</Paper>\n\n\t\t\t{/*<Card className=\"header\">\n\t\t\t\t<CardContent>\n\n\t\t\t\t\t<div style={{\n\t\t\t\t\t\tmargin: '-16px -16px 0 -16px',\n\t\t\t\t\t\tpadding: '2px 4px',\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<IconButton style={{padding:'10px'}} aria-label=\"menu\">\n\t\t\t\t\t\t\t<MenuIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<InputBase\n\t\t\t\t\t\t\tstyle={{flex: 1}}\n\t\t\t\t\t\t\tplaceholder=\"Search Google Maps\"\n\t\t\t\t\t\t\tinputProps={{'aria-label': 'search google maps'}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton type=\"submit\" style={{padding:'10px'}} aria-label=\"search\" onClick={this.submitTheSearchQuery}>\n\t\t\t\t\t\t\t<SearchIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Typography variant=\"h4\" component=\"h1\" gutterBottom>QueerCenters</Typography>\n\t\t\t\t</CardContent>\n\t\t\t\t<CardActions>\n\t\t\t\t\t<Button size=\"small\">Learn More</Button>\n\t\t\t\t</CardActions>\n\t\t\t</Card>*/}\n\t\t</div>)\n\t}\n}\n\n\n// <a className=\"infoLink\" rel=\"noopener noreferrer\" href=\"https://github.com/thomasrosen/queer-centers\" target=\"_blank\">Infos / Ort hinzufügen</a>","import React from 'react'\nimport './index.css'\n\n// import {navigate/*,Router,Link*/} from '@reach/router'\n// import {gql} from 'apollo-boost'\nimport {\n\tloadQuestions as query_loadQuestions,\n\tanswerQuestion as mutation_answerQuestion,\n} from '../queries.js'\n\n// import categories from '../data/dist/categories.json'\n// import presets from '../data/dist/presets.json'\n// import colors from '../data/dist/colors.json'\n// import colorsByPreset from '../data/dist/colorsByPreset.json'\n// import {getPreset, getColorByPreset} from '../functions.js'\n\nimport {\n\tTypography,\n\tButton,\n\tFab,\n\t// Snackbar,\n\n\t// List,\n\t// ListItem,\n\t// ListItemIcon,\n\t// ListItemText,\n\t// ListSubheader,\n\n\t// Card,\n\t// CardContent,\n\t// Divider,\n\t// Chip,\n\n\t// Icon,\n\n\tTextField,\n} from '@material-ui/core'\nimport {\n\t// Map as MapIcon,\n\t// Link as LinkIcon,\n\n\t// Phone as PhoneIcon,\n\t// Print as PrintIcon,\n\t// Mail as MailIcon,\n\n\t// Facebook as FacebookIcon,\n\t// Instagram as InstagramIcon,\n\t// Twitter as TwitterIcon,\n\t// YouTube as YouTubeIcon,\n\n\t// Edit as EditIcon,\n\tDoneRounded as DoneIcon,\n\tArrowForwardRounded as ArrowForwardIcon,\n} from '@material-ui/icons'\n// import {\n// \tAutocomplete\n// } from '@material-ui/lab'\n\n/*\nconst questions = [\n\t{\n\t\t_id: 'tag_wheelchair',\n\t\tproperties: {\n\t\t\tquestion: 'Ist dieser Ort mit einem Rollstuhl erreichbar?',\n\t\t\tpossibleAnswers: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'yes',\n\t\t\t\t\t// icon: 'check',\n\t\t\t\t\ttitle: 'Ja',\n\t\t\t\t\ttag: {\n\t\t\t\t\t\twheelchair:'yes',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'no',\n\t\t\t\t\t// icon: 'clear',\n\t\t\t\t\ttitle: 'Nein',\n\t\t\t\t\ttag: {\n\t\t\t\t\t\twheelchair:'no',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t},\n\t{\n\t\t_id: 'tag_toilets',\n\t\tproperties: {\n\t\t\tquestion: 'Hat dieser Ort Toiletten?',\n\t\t\tpossibleAnswers: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'yes',\n\t\t\t\t\ttitle: 'Ja',\n\t\t\t\t\ttag: {\n\t\t\t\t\t\t'toilets':'yes',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'no',\n\t\t\t\t\ttitle: 'Nein',\n\t\t\t\t\ttag: {\n\t\t\t\t\t\t'toilets':'no',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]\n\t\t}\n\t}\n]\nconst questionsById = questions.reduce((obj,questionDoc)=>{\n\tobj[questionDoc._id] = questionDoc\n\treturn obj\n}, {})\nconst questionIDs = Object.keys(questionsById)\nconsole.log('questionsById', questionsById)\n*/\n\nexport default class Questions extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tquestionsAreLoaded: false,\n\t\t\tanswersByQuestionId: {},\n\t\t\tquestionDoc: null,\n\t\t}\n\t\t\n\t\tthis.inputValues = {}\n\n\t\tthis.setNextQuestionDoc = this.setNextQuestionDoc.bind(this)\n\t\tthis.answerQuestion = this.answerQuestion.bind(this)\n\t\tthis.finish = this.finish.bind(this)\n\t\tthis.loadQuestions = this.loadQuestions.bind(this)\n\t\tthis.submitInputs = this.submitInputs.bind(this)\n\t\tthis.directlySubmitInputValue = this.directlySubmitInputValue.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadQuestions()\n\t}\n\tcomponentDidUpdate(){\n\t\tthis.setNextQuestionDoc()\n\t}\n\n\tfinish(){\n\t\tif (this.props.onFinish) {\n\t\t\tthis.props.onFinish()\n\t\t}\n\t}\n\n\tloadQuestions(){\n\t\twindow.graphql.query({\n\t\t\tquery: query_loadQuestions,\n\t\t\t// variables: {},\n\t\t}).then(result => {\n\t\t\tthis.questions = result.data.questions\n\t\t\tthis.questionsById = this.questions.reduce((obj,questionDoc)=>{\n\t\t\t\tobj[questionDoc._id] = questionDoc\n\t\t\t\treturn obj\n\t\t\t}, {})\n\t\t\tthis.questionIDs = Object.keys(this.questionsById)\n\n\t\t\tthis.setState({questionsAreLoaded:true})\n\t\t}).catch(error=>{\n\t\t\tconsole.error(error)\n\t\t})\n\t}\n\n\tanswerQuestion(questionDoc, answerValue){\n\t\twindow.graphql.mutate({\n\t\t\tmutation: mutation_answerQuestion,\n\t\t\tvariables: {\n\t\t\t\tproperties: {\n\t\t\t\t\tforID: this.props.doc._id,\n\t\t\t\t\tquestionID: questionDoc._id,\n\t\t\t\t\tanswer: answerValue,\n\t\t\t\t}\n\t\t\t}\n\t\t}).then(result=>{\n\t\t\tconsole.info('mutate-result', result)\n\t\t}).catch(error=>{\n\t\t\tconsole.error('mutate-error', error)\n\t\t})\n\n\t\tthis.setState((state,props)=>{ // start this while mutating\n\t\t\treturn {\n\t\t\t\tanswersByQuestionId: {\n\t\t\t\t\t...state.answersByQuestionId,\n\t\t\t\t\t[questionDoc._id]: answerValue,\n\t\t\t\t},\n\t\t\t}\n\t\t})\n\t}\n\n\tdirectlySubmitInputValue(questionDoc, answerKey, answerValue){\n\t\tthis.answerQuestion(questionDoc, {\n\t\t\t[answerKey]: answerValue\n\t\t})\n\t}\n\tsaveInputValue(key, event){\n\t\tthis.inputValues[key] = event.target.value\n\t}\n\tsubmitInputs(questionDoc){\n\t\tthis.answerQuestion(questionDoc, this.inputValues)\n\t}\n\n\tsetNextQuestionDoc(){\n\t\tif (this.state.questionsAreLoaded) {\n\t\t\tconst answeredQuestionIDs = Object.keys(this.state.answersByQuestionId)\n\t\t\n\t\t\tlet nextQuestionDoc = null\n\t\t\tif (answeredQuestionIDs.length < 7) { \n\t\t\t\tconst questionIDs_NotAsked = (\n\t\t\t\t\tansweredQuestionIDs.length === 0\n\t\t\t\t\t? this.questionIDs\n\t\t\t\t\t: this.questionIDs.filter(id=>!answeredQuestionIDs.includes(id))\n\t\t\t\t)\n\n\t\t\t\tif (questionIDs_NotAsked.length > 0) {\n\t\t\t\t\t// nextQuestionDoc = this.questionsById[questionIDs_NotAsked[0]]\n\t\t\t\t\tnextQuestionDoc = this.questionsById[questionIDs_NotAsked[ Math.random() * questionIDs_NotAsked.length >> 0 ]] // get a random item // source: https://stackoverflow.com/questions/5915096/get-random-item-from-javascript-array\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.setState((state,props)=>{\n\t\t\t\tif (nextQuestionDoc !== state.questionDoc) {\n\t\t\t\t\tthis.inputValues = {}\n\t\t\t\t\treturn {questionDoc: nextQuestionDoc}\n\t\t\t\t}\n\t\t\t\treturn null\n\t\t\t})\n\t\t}\n\t}\n\n\trenderQuestion(questionDoc){\n\t\tif (!(\n\t\t\t!!questionDoc &&\n\t\t\t!!questionDoc._id &&\n\t\t\t!!questionDoc.properties\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst hasInputField = questionDoc.properties.possibleAnswers.reduce((bool,possibleAnswer)=>{\n\t\t\treturn (\n\t\t\t\tbool ||\n\t\t\t\t(possibleAnswer.inputtype || '') === 'text' ||\n\t\t\t\t(possibleAnswer.inputtype || '') === 'number'\n\t\t\t)\n\t\t}, false)\n\n\t\treturn (<React.Fragment key=\"question\">\n\t\t\t<div style={{margin:'16px'}}>\n\t\t\t\t<Typography variant=\"h6\">{questionDoc.properties.question}</Typography>\n\n\t\t\t\t<div style={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\talignItems: 'stretch',\n\t\t\t\t\talignContent: 'stretch',\n\t\t\t\t\tjustifyContent: 'space-between',\n\t\t\t\t\tmargin: '24px -8px -8px -8px',\n\t\t\t\t\tflexDirection: (hasInputField ? 'column' : 'row'),\n\t\t\t\t}}>\n\t\t\t\t\t{questionDoc.properties.possibleAnswers.map(possibleAnswer=>{\n\t\t\t\t\t\tconst possibleAnswerKey = possibleAnswer.key\n\t\t\t\t\t\t// const possibleAnswer = pair[0]\n\t\t\t\t\t\tpossibleAnswer.inputtype = possibleAnswer.inputtype || ''\n\t\t\t\t\t\tif (possibleAnswer.inputtype === 'text') {\n\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\tlabel={possibleAnswer.title}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\tonChange={(event)=>this.saveInputValue(possibleAnswerKey, event)}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmargin: '4px 8px',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t}else if (possibleAnswer.inputtype === 'number') {\n\t\t\t\t\t\t\treturn (<TextField\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\tlabel={possibleAnswer.title}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tonChange={(event)=>this.saveInputValue(possibleAnswerKey, event)}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tmargin: '4px 8px',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>)\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tkey={possibleAnswerKey}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.directlySubmitInputValue(questionDoc,possibleAnswerKey,true)}\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\t\t\t\t\tborder: 'none',\n\t\t\t\t\t\t\t\t\t\tboxShadow: 'inset 0 0 0 999px rgba(0,0,0,0.04)',\n\t\t\t\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\t\t\t\tmargin: '4px 8px',\n\t\t\t\t\t\t\t\t\t\tpadding: '16px 8px',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t!!possibleAnswer.icon\n\t\t\t\t\t\t\t\t\t\t? (<div className=\"material-icons\" style={{\n\t\t\t\t\t\t\t\t\t\t\tmarginRight: '8px',\n\t\t\t\t\t\t\t\t\t\t}}>{possibleAnswer.icon}</div>)\n\t\t\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{possibleAnswer.title}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t<div style={{\n\t\t\t\t\tmargin: (hasInputField ? '32px 0 0 -16px' : '64px -16px 0 -16px'),\n\t\t\t\t\tpadding: '0',\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: (hasInputField ? 'space-between' : 'end'),\n\t\t\t\t}}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"text\"\n\t\t\t\t\t\tonClick={()=>this.answerQuestion(questionDoc,'skipped')}\n\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'inherit',\n\t\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\t\tpadding: '8px 16px',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tÜberspringen {hasInputField ? null : <ArrowForwardIcon style={{color:'inherit',marginLeft:'8px'}}/>}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{\n\t\t\t\t\t\thasInputField\n\t\t\t\t\t\t? (<Fab\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tonClick={()=>this.submitInputs(questionDoc)}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\tbackground: 'black',\n\t\t\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\t\t\tpadding: '0 16px 0 20px',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tWeiter <ArrowForwardIcon style={{color:'var(--light-green)',marginLeft:'8px'}}/>\n\t\t\t\t\t\t</Fab>)\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</React.Fragment>)\n\t}\n\n\trender() {\n\t\tconst doc = this.props.doc\n\n\t\tif (!(\n\t\t\t!!doc &&\n\t\t\t!!doc._id &&\n\t\t\t!!doc.properties &&\n\t\t\t!!doc.properties.tags\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\t// const properties = doc.properties\n\t\t// const tags = properties.tags\n\n\t\tconst questionDoc = this.state.questionDoc\n\n\t\tif (!this.state.questionsAreLoaded) {\n\t\t\treturn (<div style={{textAlign:'center', margin:'16px'}}>\n\t\t\t\t<Typography variant=\"body1\" style={{margin:'0 0 32px 0'}}>Die Fragen werden geladen...</Typography>\n\n\t\t\t\t<Fab\n\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\tonClick={this.finish}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\tbackground: 'black',\n\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\tpadding: '8px 16px',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tAbbrechen\n\t\t\t\t</Fab>\n\t\t\t</div>)\n\t\t} else if (!!questionDoc) {\n\t\t\treturn this.renderQuestion(questionDoc)\n\t\t}else{\n\t\t\treturn (<div style={{textAlign:'center', margin:'16px'}}>\n\t\t\t\t<Typography variant=\"body1\" style={{margin:'0 0 32px 0'}}>Du hast alle Fragen beantwortet!<br />Vielen Dank!!!</Typography>\n\n\t\t\t\t<Fab\n\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\tonClick={this.finish}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\tbackground: 'black',\n\t\t\t\t\t\tborderRadius: '999px',\n\t\t\t\t\t\tpadding: '8px 16px',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DoneIcon style={{color:'var(--light-green)',marginRight:'8px'}}/> Fertig\n\t\t\t\t</Fab>\n\t\t\t</div>)\n\t\t}\n\t}\n}","import React from 'react'\nimport './index.css'\n\n// import {navigate/*,Router,Link*/} from '@reach/router'\n// import {gql} from 'apollo-boost'\n// import {loadPlace as query_loadPlace} from '../queries.js'\n\n// import categories from '../data/dist/categories.json'\nimport presets from '../data/dist/presets.json'\nimport colors from '../data/dist/colors.json'\nimport colorsByPreset from '../data/dist/colorsByPreset.json'\nimport {getPreset, getColorByPreset} from '../functions.js'\n\nimport {\n\tTypography,\n\tFab,\n\t// Button,\n\tSnackbar,\n\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\tListSubheader,\n\n\tPaper,\n\tCard,\n\tCardContent,\n\t// Divider,\n\t// Chip,\n\n\tIcon,\n\t// Backdrop,\n\t// TextField,\n} from '@material-ui/core'\nimport {\n\t// Block as BlockIcon,\n\t// Announcement as AnnouncementIcon,\n\tCheckRounded as CheckIcon,\n\t// ChildFriendly as ChildFriendlyIcon,\n\t// Explicit as ExplicitIcon,\n\n\t// Map as MapIcon,\n\tLinkRounded as LinkIcon,\n\n\tPhoneRounded as PhoneIcon,\n\tPrintRounded as PrintIcon,\n\tMailRounded as MailIcon,\n\n\t// Facebook as FacebookIcon,\n\t// Instagram as InstagramIcon,\n\t// Twitter as TwitterIcon,\n\t// YouTube as YouTubeIcon,\n\n\tEditRounded as EditIcon,\n\t// Done as DoneIcon,\n\t// ArrowBack as ArrowBackIcon,\n\t// ArrowForward as ArrowForwardIcon,\n} from '@material-ui/icons'\n// import {\n// \tAutocomplete\n// } from '@material-ui/lab'\n\nimport Questions from '../Questions/index.js'\n\nimport yelp_icon from '../_images/yelp.png'\nimport facebook_icon from '../_images/facebook.png'\nimport instagram_icon from '../_images/instagram.png'\nimport youtube_icon from '../_images/youtube.png'\nimport twitter_icon from '../_images/twitter.png'\nimport openstreetmap_icon from '../_images/openstreetmap.svg'\n\nconst YelpIcon\t\t\t= props => <Icon style={{backgroundImage:'url('+yelp_icon+')',\t\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst FacebookIcon\t\t= props => <Icon style={{backgroundImage:'url('+facebook_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst InstagramIcon\t\t= props => <Icon style={{backgroundImage:'url('+instagram_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst YouTubeIcon\t\t= props => <Icon style={{backgroundImage:'url('+youtube_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst TwitterIcon\t\t= props => <Icon style={{backgroundImage:'url('+twitter_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\nconst OpenstreetmapIcon\t= props => <Icon style={{backgroundImage:'url('+openstreetmap_icon+')',\tbackgroundSize:'contain',backgroundRepeat:'no-repeat'}}></Icon>\n\n\n// import opening_hours from '../_scripts/opening_hours.js/index.js'\n// import '../_scripts/opening_hours+deps.min.js'\n\n// import opening_hours from 'opening_hours'\n\n      // var oh = new window.opening_hours('do', {}, { 'locale': 'de' });\n\n      // var prettified_value = oh.prettifyValue({\n      //   conf: { locale: 'de' },\n      // });\n\n\nconst ListItemLink = props => <ListItem button component=\"a\" {...props} />\n\n// const tag_suggestions = ['youthcenter','cafe','bar','education','community-center','youthgroup','group','mediaprojects']\n// const this_is_a_place_for_suggestions = ['queer','undecided','friends','family','trans','inter','gay','hetero','bi','lesbian','friend']\n\nexport default class Sidebar extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tdoc: {},\n\t\t\tchangedProperties: {},\n\t\t\tstage: 'viewing', // viewing editing submitting\n\t\t\twhichSnackbarIsOpen: null,\n\t\t}\n\n\t\tthis.edit = this.edit.bind(this)\n\t\tthis.view = this.view.bind(this)\n\t\t// this.submit = this.submit.bind(this)\n\t\t// this.back = this.back.bind(this)\n\n\t\tthis.renderView = this.renderView.bind(this)\n\t\tthis.renderQuestions = this.renderQuestions.bind(this)\n\n\t\tthis.updateChangedProperties = this.updateChangedProperties.bind(this)\n\t\tthis.getAgeRangeText = this.getAgeRangeText.bind(this)\n\t\tthis.getChangesetDoc = this.getChangesetDoc.bind(this)\n\t\tthis.closeAllSnackbarsOnTimeout = this.closeAllSnackbarsOnTimeout.bind(this)\n\n\t\t// this.docChanged = this.docChanged.bind(this)\n\t\tthis.checkIfDocIdChanged = this.checkIfDocIdChanged.bind(this)\n\n\t\tthis.editNewDoc = this.editNewDoc.bind(this)\n\t\tthis.setDoc = this.setDoc.bind(this)\n\n\t\t// this.renderQuestions = this.renderQuestions.bind(this)\n\t\t// this.closeQuestions = this.closeQuestions.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tif (this.props.onFunctions) {\n\t\t\tthis.props.onFunctions({\n\t\t\t\teditNewDoc: this.editNewDoc,\n\t\t\t\tsetDoc: (...attr)=>this.setDoc(...attr),\n\t\t\t\tgetWantedTagsList: ()=>{\n\t\t\t\t\treturn [\n\t\t\t\t\t\t'min_age',\n\t\t\t\t\t\t'max_age',\n\n\t\t\t\t\t\t'wheelchair',\n\n\t\t\t\t\t\t'contact:',\n\n\t\t\t\t\t\t'website',\n\t\t\t\t\t\t'email',\n\t\t\t\t\t\t'phone',\n\t\t\t\t\t\t'fax',\n\n\t\t\t\t\t\t'instagram',\n\t\t\t\t\t\t'facebook',\n\t\t\t\t\t\t'twitter',\n\t\t\t\t\t\t'youtube',\n\t\t\t\t\t\t'yelp',\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tthis.checkIfDocIdChanged()\n\t}\n\tcomponentDidUpdate(){\n\t\tthis.checkIfDocIdChanged()\n\t}\n\tasync checkIfDocIdChanged(){\n\t\tconst docID = this.props.docID\n\t\tif (!!docID && docID !== this.state.doc._id && this.props.onViewDoc) {\n\t\t\t// await navigate(`/place/${doc._id}/`)\n\t\t\tif (docID !== 'add') {\n\t\t\t\tthis.props.onViewDoc(docID)\n\t\t\t}\n\t\t}\n\t}\n\n\teditNewDoc(typename){\n\t\tthis.setState({\n\t\t\tdoc: {},\n\t\t\tchangedProperties: {},\n\t\t}, ()=>{\n\t\t\tthis.props.onSetSidebarIsOpen(true)\n\t\t\tthis.edit()\n\t\t})\n\t}\n\tsetDoc(newDoc) {\n\t\tif (newDoc !== null && newDoc._id !== null) {\n\t\t\tnewDoc.___preset = getPreset(newDoc.properties.tags || {}, presets)\n\t\t\tnewDoc.___color = getColorByPreset(newDoc.___preset.key,colorsByPreset) || colors.default\n\n\t\t\tthis.setState({\n\t\t\t\tdoc: newDoc,\n\t\t\t\tchangedProperties: {},\n\t\t\t\tstage: 'viewing',\n\t\t\t}, ()=>{\n\t\t\t\tthis.props.onSetSidebarIsOpen(true)\n\t\t\t\tthis.props.onSetSearchBarValue(this.state.doc.properties.name)\n\t\t\t})\n\t\t}\n\t}\n\n\tedit(){\n\t\tthis.setState({stage:'editing'})\n\t\t// this.props.onSetSearchBarValue(!!this.state.doc && !!this.state.doc._id ? 'Edit Place' : 'Add Place')\n\t}\n\tview(){\n\t\tthis.setState({stage:'viewing'})\n\t}\n\tgetChangesetDoc(){\n\t\t// const properties = this.state.changedProperties\n\t\tlet properties = {\n\t\t\t// ...this.state.doc.properties,\n\t\t\t...this.state.changedProperties,\n\t\t}\n\n\t\t// START parse age-range\n\t\tif (properties.min_age || properties.max_age) {\n\t\t\tlet min_age = Number.parseInt(properties.min_age || this.state.doc.properties.min_age)\n\t\t\tlet max_age = Number.parseInt(properties.max_age || this.state.doc.properties.max_age)\n\t\n\t\t\tif (Number.isNaN(min_age) || min_age < 0) {\n\t\t\t\tmin_age = null\n\t\t\t}\n\t\t\tif (Number.isNaN(max_age) || max_age < 0) {\n\t\t\t\tmax_age = null\n\t\t\t}\n\t\n\t\t\tif (\n\t\t\t\t!Number.isNaN(min_age) && min_age !== null &&\n\t\t\t\t!Number.isNaN(max_age) && max_age !== null\n\t\t\t){\n\t\t\t\tconst numbers = [min_age,max_age]\n\t\t\t\tconst numbersSorted = [...numbers].sort((a,b)=>a-b)\n\t\n\t\t\t\tmin_age = numbersSorted[0]\n\t\t\t\tmax_age = numbersSorted[1]\n\t\n\t\t\t\tif (\n\t\t\t\t\tnumbers[0] === numbersSorted[0] &&\n\t\t\t\t\tnumbers[1] === numbersSorted[1]\n\t\t\t\t) {\n\t\t\t\t\tif (properties.min_age) {\n\t\t\t\t\t\tproperties.min_age = min_age\n\t\t\t\t\t}\n\t\t\t\t\tif (properties.max_age) {\n\t\t\t\t\t\tproperties.max_age = max_age\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tproperties.min_age = min_age\n\t\t\t\t\tproperties.max_age = max_age\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif (properties.min_age && min_age !== null) {\n\t\t\t\t\tproperties.min_age = min_age\n\t\t\t\t}\n\t\t\t\tif (properties.max_age && max_age !== null) {\n\t\t\t\t\tproperties.max_age = max_age\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// END parse age-range\n\n\t\tconst sources = this.state.changedProperties.sources\n\t\tconst comment = this.state.changedProperties.comment\n\n\t\tif (Object.keys(properties).length > 0) {\n\t\t\treturn {\n\t\t\t\tforDoc: this.state.doc._id,\n\t\t\t\tproperties: {\n\t\t\t\t\t...properties,\n\t\t\t\t\tsources: undefined,\n\t\t\t\t\tcomment: undefined,\n\t\t\t\t\t__typename: 'Place',\n\t\t\t\t},\n\t\t\t\tsources: sources,\n\t\t\t\tcomment: comment,\n\t\t\t\tfromBot: false,\n\t\t\t\tcreated_by: 'queer.qiekub.com',\n\t\t\t\tcreated_at: new Date()*1,\n\t\t\t}\n\t\t}else{\n\t\t\treturn null\n\t\t}\n\t}\n\t/*submit(){\n\t\tthis.setState({whichSnackbarIsOpen:'submittingSuggestion'})\n\n\t\tconst changesetDoc = this.getChangesetDoc()\n\n\t\tif (changesetDoc !== null) {\n\t\t\tlet changeset_json = JSON.stringify(changesetDoc)\n\t\t\tchangeset_json = changeset_json.replace(/\"(\\w+)\"\\s*:/g, '$1:')\n\n\t\t\twindow.graphql.mutate({\n\t\t\t\tmutation: gql`mutation {\n\t\t\t\t\taddChangeset(changeset:${changeset_json}) {\n\t\t\t\t\t\t_id\n\t\t\t\t\t\tproperties {\n\t\t\t\t\t\t\t... on Changeset {\n\t\t\t\t\t\t\t\tforDoc\n\t\t\t\t\t\t\t\tproperties {\n\t\t\t\t\t\t\t\t\t__typename\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}`,\n\t\t\t\trefetchQueries: (\n\t\t\t\t\tthis.state.doc._id\n\t\t\t\t\t? [{\n\t\t\t\t\t\tquery: query_loadPoi,\n\t\t\t\t\t\tvariables: {_id:this.state.doc._id},\n\t\t\t\t\t}]\n\t\t\t\t\t: undefined\n\t\t\t\t)\n\t\t\t}).then(async result => {\n\t\t\t\tconsole.info('mutate-result', result)\n\n\t\t\t\tthis.setState({\n\t\t\t\t\t// changedProperties: {},\n\t\t\t\t\t// stage: 'viewing',\n\t\t\t\t\twhichSnackbarIsOpen:'finishedSuggesting',\n\t\t\t\t})\n\n\t\t\t\tsetTimeout(async ()=>{\n\t\t\t\t\tif (this.state.doc._id !== result.data.addChangeset.properties.forDoc) {\n\t\t\t\t\t\tawait navigate(`/place/${result.data.addChangeset.properties.forDoc}/`)\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.props.onViewDoc(result.data.addChangeset.properties.forDoc,true)\n\t\t\t\t}, 100)\n\t\t\t}).catch(error=>{\n\t\t\t\tconsole.error('mutate-error', error)\n\n\t\t\t\tthis.setState({whichSnackbarIsOpen:'problemWhileSuggesting'})\n\t\t\t})\n\t\t}\n\t}*/\n\n\tupdateChangedProperties(newValues){\n\t\tthis.setState((state, props) => {\n\t\t\treturn {changedProperties: {\n\t\t\t\t...state.changedProperties,\n\t\t\t\t...newValues,\n\t\t\t}}\n\t\t})\n\t}\n\n\tgetAgeRangeText(min_age,max_age){\n\t\tmin_age = Number.parseInt(min_age)\n\t\tmax_age = Number.parseInt(max_age)\n\n\t\tif (Number.isNaN(min_age) || min_age < 0) {\n\t\t\tmin_age = null\n\t\t}\n\t\tif (Number.isNaN(max_age) || max_age < 0) {\n\t\t\tmax_age = null\n\t\t}\n\n\t\tif (\n\t\t\t!!min_age && !Number.isNaN(min_age) &&\n\t\t\t!!max_age && !Number.isNaN(max_age)\n\t\t){\n\t\t\tconst numbers = [min_age,max_age].sort((a,b)=>a-b)\n\t\t\tmin_age = numbers[0]\n\t\t\tmax_age = numbers[1]\n\t\t}\n\n\t\treturn (\n\t\t\tmin_age === null && max_age === null\n\t\t\t? '' // 'Für jedes Alter!'\n\t\t\t: (min_age === null && max_age !== null\n\t\t\t? 'Bis '+max_age+' Jahre'\n\t\t\t: (min_age !== null && max_age === null\n\t\t\t? 'Ab '+min_age+' Jahre'\n\t\t\t: (min_age !== null && max_age !== null\n\t\t\t? min_age+' bis '+max_age+' Jahre'\n\t\t\t: ''\n\t\t))))\n\t}\n\n\tparseLinks(links){\n\t\t// const links = `\n\t\t// \thttps://www.anyway-koeln.de/\n\t\t// \thttps://www.instagram.com/anyway_koeln/\n\t\t// `\n\n\t\treturn [...new Set(links.match(/([a-z0-9]*:[^\\s]+)/gmiu))].map(url=>new URL(url)).map(url=>{\n\t\t\tlet obj = {\n\t\t\t\turl,\n\t\t\t\thref: url.href,\n\t\t\t\ttext: url.href,\n\t\t\t\ttype: 'default',\n\t\t\t}\n\n\t\t\tif (url.hostname === 'www.instagram.com' || url.hostname === 'instagram.com') {\n\t\t\t\tobj.type = 'instagram'\n\t\t\t} else if (url.hostname === 'www.facebook.com' || url.hostname === 'facebook.com') {\n\t\t\t\tobj.type = 'facebook'\n\t\t\t}else if (url.hostname === 'www.twitter.com' || url.hostname === 'twitter.com') {\n\t\t\t\tobj.type = 'twitter'\n\t\t\t}else if (url.hostname === 'www.youtube.com' || url.hostname === 'youtube.com') {\n\t\t\t\tobj.type = 'youtube'\n\t\t\t}else if (url.protocol === 'tel:') {\n\t\t\t\tobj.type = 'phonenumber'\n\t\t\t\tobj.text = url.pathname\n\t\t\t}else if (url.protocol === 'mailto:') {\n\t\t\t\tobj.type = 'mail'\n\t\t\t\tobj.text = url.pathname\n\t\t\t}\n\n\t\t\treturn obj\n\t\t})\n\t}\n\n\t/*renderOpeningHours(doc){\n\t\tconst weekdayNames = 'Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ')\n\n\t\tif (!!doc.properties.tags.opening_hours) {\n\t\t\tconst hours = doc.properties.tags.opening_hours\n\n\t\t\ttry {\n\t\t\t\tconst oh = new window.opening_hours(hours, {}, {\n\t\t\t\t\t'locale': 'de-DE'\n\t\t\t\t})\n\t\n\t\t\t\tlet now = new Date()\n\t\t\t\tlet from = new Date(now.getFullYear(), now.getMonth(), now.getDate()-1, 0, 0, 0, 0)\n\t\n\t\t\t\tlet days = []\n\t\t\t\tfor (var i = 0; i < 7; i++) {\n\t\t\t\t\tconst to = new Date(from.getTime()+(86400*1000)) // 86400 = 1 day | 518400 = 6 days\n\t\n\t\t\t\t\tconst weekdayName = weekdayNames[from.getDay()]\n\t\t\t\t\tconst intervals = oh.getOpenIntervals(from, to).map(range=>{\n\t\t\t\t\t\treturn `${(range[0].getHours()+'').padStart(2,'0')}:${(range[0].getMinutes()+'').padStart(2,'0')}–${(range[1].getHours()+'').padStart(2,'0')}:${(range[1].getMinutes()+'').padStart(2,'0')}`\n\t\t\t\t\t})\n\t\n\t\t\t\t\tdays.push(<ListItem key={weekdayName} style={{display:'flex',alignItems:'flex-start'}}>\n\t\t\t\t\t\t<ListItemText style={{width:'100px'}}>{weekdayName}</ListItemText>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{intervals.length === 0 ? <ListItemText>Geschlossen</ListItemText> : intervals.map(text=><ListItemText style={{display:'block'}}>{text}</ListItemText>)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ListItem>)\n\t\n\t\t\t\t\tfrom = to\n\t\t\t\t}\n\t\n\t\t\t\treturn days\n\t\t\t}catch(error){\n\t\t\t\tconsole.error('Error while parsing opening_hours:', error)\n\t\t\t\treturn null\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}*/\n\n\trenderView(doc){\n\t\tconst properties = doc.properties\n\t\tconst tags = properties.tags\n\n\t\tconst age_range_text = this.getAgeRangeText(tags.min_age, tags.max_age)\n\n\t\t// https://wiki.openstreetmap.org/wiki/Key:contact\n\t\t//\n\t\t// properties.links = `\n\t\t// \thttps://www.anyway-koeln.de/\n\t\t// \thttps://www.instagram.com/anyway_koeln/\n\t\t// \thttps://www.facebook.com/anyway_koeln/\n\t\t// \thttps://www.youtube.com/anyway_koeln/\n\t\t// \thttps://www.twitter.com/anyway_koeln/\n\t\t// \ttel:09234658723\n\t\t// \tmailto:kjqhgr@sadf.asdf\n\t\t// `\n\n\t\t// const links = this.parseLinks(properties.links && properties.links.length > 0 ? properties.links : [])\n\t\t\n\n\t\tconst link_tags = {\n\t\t\twebsite: tags['contact:website'] || tags['website'],\n\t\t\tyelp: tags['contact:yelp'] || tags['yelp'],\n\n\t\t\tfacebook: tags['contact:facebook'] || tags['facebook'],\n\t\t\tinstagram: tags['contact:instagram'] || tags['instagram'],\n\t\t\ttwitter: tags['contact:twitter'] || tags['twitter'],\n\t\t\tyoutube: tags['contact:youtube'] || tags['youtube'],\n\n\t\t\temail: tags['contact:email'] || tags['email'],\n\t\t\tphonenumber: tags['contact:phone'] || tags['phone'],\n\t\t\tfaxnumber: tags['contact:fax'] || tags['fax'],\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tconst get_username_regexp = /.*\\/([^\\/]+)\\/?/\n\n\t\tconst links = []\n\n\t\tif (!!link_tags.website) {\n\t\t\tconst matches = link_tags.website.match(/(?:.*?:\\/\\/)?(?:www\\.)?(?:(.+)\\/|(.+))/)\n\t\t\tlinks.push({\n\t\t\t\ttype: 'website',\n\t\t\t\thref: link_tags.website,\n\t\t\t\ttext: !!matches ? matches[1] || matches[2] : link_tags.website,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.email) {\n\t\t\tlinks.push({\n\t\t\t\ttype: 'email',\n\t\t\t\thref: 'mailto:'+link_tags.email,\n\t\t\t\ttext: link_tags.email,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.phonenumber) {\n\t\t\tlinks.push({\n\t\t\t\ttype: 'phonenumber',\n\t\t\t\thref: 'tel:'+link_tags.phonenumber,\n\t\t\t\ttext: link_tags.phonenumber,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.faxnumber) {\n\t\t\tlinks.push({\n\t\t\t\ttype: 'faxnumber',\n\t\t\t\thref: 'fax:'+link_tags.faxnumber,\n\t\t\t\ttext: link_tags.faxnumber,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.facebook) {\n\t\t\tconst matches = link_tags.facebook.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\ttype: 'facebook',\n\t\t\t\thref: !!matches ? link_tags.facebook : 'https://facebook.com/'+link_tags.facebook,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+link_tags.facebook,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.instagram) {\n\t\t\tconst matches = link_tags.instagram.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\ttype: 'instagram',\n\t\t\t\thref: !!matches ? link_tags.instagram : 'https://instagram.com/'+link_tags.instagram,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+link_tags.instagram,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.youtube) {\n\t\t\tconst matches = link_tags.youtube.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\ttype: 'youtube',\n\t\t\t\thref: !!matches ? link_tags.youtube : 'https://youtube.com/user/'+link_tags.youtube,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+link_tags.youtube,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.twitter) {\n\t\t\tconst matches = link_tags.twitter.match(get_username_regexp)\n\t\t\tlinks.push({\n\t\t\t\ttype: 'twitter',\n\t\t\t\thref: !!matches ? link_tags.twitter : 'https://twitter.com/'+link_tags.twitter,\n\t\t\t\ttext: !!matches ? '@'+matches[1] : '@'+link_tags.twitter,\n\t\t\t})\n\t\t}\n\n\t\tif (!!link_tags.yelp) {\n\t\t\tlinks.push({\n\t\t\t\ttype: 'yelp',\n\t\t\t\thref: link_tags.yelp,\n\t\t\t\ttext: 'View on Yelp',\n\t\t\t})\n\t\t}\n\n\t\tif (!!properties.osmID) {\n\t\t\tlinks.push({\n\t\t\t\ttype: 'osm',\n\t\t\t\thref: 'https://openstreetmap.org/'+properties.osmID,\n\t\t\t\ttext: 'View on OpenStreetMap',\n\t\t\t})\n\t\t}\n\n\n\t\tconst linkIcons = {\n\t\t\tdefault: (<LinkIcon style={{color:'black'}} />),\n\n\t\t\tosm: <OpenstreetmapIcon />, // (<MapIcon style={{color:'black'}} />),\n\t\t\tyelp: <YelpIcon />,\n\n\t\t\tphonenumber: (<PhoneIcon style={{color:'black'}} />),\n\t\t\tfaxnumber: (<PrintIcon style={{color:'black'}} />),\n\t\t\temail: (<MailIcon style={{color:'black'}} />),\n\n\t\t\tyoutube: <YouTubeIcon />,\n\t\t\ttwitter: <TwitterIcon />,\n\t\t\tfacebook: <FacebookIcon />,\n\t\t\tinstagram: <InstagramIcon />,\n\t\t}\n\t\tconst contact = links.filter(link=>\n\t\t\tlink.type==='website' ||\n\t\t\tlink.type==='phonenumber' ||\n\t\t\tlink.type==='faxnumber' ||\n\t\t\tlink.type==='email'\n\t\t)\n\t\tconst socialMedia = links.filter(link=>\n\t\t\tlink.type==='youtube' ||\n\t\t\tlink.type==='twitter' ||\n\t\t\tlink.type==='facebook' ||\n\t\t\tlink.type==='instagram' ||\n\t\t\tlink.type==='yelp' ||\n\t\t\tlink.type==='osm'\n\t\t)\n\n\t\tconst openingHoursComponent = null // this.renderOpeningHours(doc)\n\n\t\t/*\n\t\t\t<Typography gutterBottom variant=\"body2\" component=\"p\">{properties.address}</Typography>\t\t\t\n\t\t\t{altName.length === 0 ? null : <Typography gutterBottom variant=\"body2\" component=\"p\">{altName}</Typography>}\n\t\t\t{age_range_text === '' ? null : <Typography variant=\"body2\" component=\"p\">{age_range_text}</Typography>}\n\t\t*/\n\n\t\treturn (<React.Fragment key=\"viewing\">\n\t\t\t<Card\n\t\t\t\televation={6}\n\t\t\t\tclassName=\"sidebarContentCard\"\n\t\t\t>\n\t\t\t\t<CardContent>\n\t\t\t\t\t{\n\t\t\t\t\t\tage_range_text === ''\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (\n\t\t\t\t\t\t\t<List dense>\n\t\t\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t\t\t<ListItemIcon><CheckIcon style={{color:'black'}}/></ListItemIcon>\n\t\t\t\t\t\t\t\t\t<ListItemText primary={'Altersbeschränkung: '+age_range_text} />\n\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\n\t\t\t\t\t{\n\t\t\t\t\t\t//  subheader={<ListSubheader>Contact</ListSubheader>}\n\t\t\t\t\t\tcontact.length === 0\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (<List dense>\n\t\t\t\t\t\t\t{contact.map(link => (\n\t\t\t\t\t\t\t\t<ListItemLink target=\"_blank\" key={link.href} href={link.href}>\n\t\t\t\t\t\t\t\t\t<ListItemIcon>{(!!linkIcons[link.type] ? linkIcons[link.type] : linkIcons.default)}</ListItemIcon>\n\t\t\t\t\t\t\t\t\t<ListItemText primary={link.text} />\n\t\t\t\t\t\t\t\t</ListItemLink>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</List>)\n\t\t\t\t\t}\n\n\t\t\t\t\t{\n\t\t\t\t\t\t// subheader={<ListSubheader>Social Media</ListSubheader>}\n\t\t\t\t\t\tsocialMedia.length === 0\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: (<List dense>\n\t\t\t\t\t\t\t{socialMedia.map(link => (\n\t\t\t\t\t\t\t\t<ListItemLink target=\"_blank\" key={link.href} href={link.href}>\n\t\t\t\t\t\t\t\t\t<ListItemIcon>{(!!linkIcons[link.type] ? linkIcons[link.type] : linkIcons.default)}</ListItemIcon>\n\t\t\t\t\t\t\t\t\t<ListItemText primary={link.text} />\n\t\t\t\t\t\t\t\t</ListItemLink>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</List>)\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t{!!openingHoursComponent ? (<List dense subheader={<ListSubheader>Opening Hours</ListSubheader>}>\n\t\t\t\t\t\t{openingHoursComponent}\n\t\t\t\t\t</List>) : null}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Fab\n\t\t\t\tvariant=\"extended\"\n\t\t\t\tonClick={this.edit}\n\t\t\t\tsize=\"large\"\n\t\t\t\tclassName=\"improveFab\"\n\t\t\t>\n\t\t\t\t<EditIcon className=\"icon\"/> Verbessern\n\t\t\t</Fab>\n\t\t</React.Fragment>)\n\t}\n\trenderQuestions(doc){\n\t\treturn (<React.Fragment key=\"editing\">\n\t\t\t<Card\n\t\t\t\televation={6}\n\t\t\t\tclassName=\"sidebarContentCard\"\n\t\t\t>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Questions key=\"the_questions\" doc={doc} onFinish={this.view}/>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</React.Fragment>)\n\t}\n\n\tcloseAllSnackbarsOnTimeout(event,reason){\n\t\tif (reason === 'timeout') {\n\t\t\tthis.setState({whichSnackbarIsOpen:null})\n\t\t}\n\t}\n\n\trender(){\n\t\tconst doc = this.state.doc\n\n\t\tif (!(\n\t\t\t!!doc &&\n\t\t\t!!doc._id &&\n\t\t\t!!doc.properties &&\n\t\t\t!!doc.properties.tags\n\t\t)) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst properties = doc.properties\n\t\t// const tags = properties.tags\n\n\t\tconst name = properties.name // || tags['official_name'] || tags['alt_name'] || tags['short_name'] || ''\n\n\t\treturn (<>\n\t\t\t<Paper\n\t\t\t\televation={6}\n\t\t\t\tclassName={this.props.className}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: doc.___color.bg,\n\t\t\t\t\tbackground: `linear-gradient(180deg, ${doc.___color.bg} 50%, var(--color-surface) 50%)`,\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\talignContent: 'stretch',\n\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t}}\n\t\t\t>\n\n\t\t\t{/*<CardMedia\n\t\t\t\tstyle={{marginTop:'-86px',height:'240px',background:'black'}}\n\t\t\t\ttitle=\"Contemplative Reptile\"\n\t\t\t\tcomponent=\"div\"\n\t\t\t\timage={reptile}\n\t\t\t/>*/}\n\n\t\t\t<Card\n\t\t\t\televation={0}\n\t\t\t\tstyle={{\n\t\t\t\t\tmargin: '0 0 -8px 0',\n\t\t\t\t\tborderRadius: '0px',\n\t\t\t\t\tpadding: '86px 0 8px 0',\n\t\t\t\t\tcolor: doc.___color.fg,\n\t\t\t\t\tbackground: doc.___color.bg,\n\t\t\t\t\tflexShrink: 0,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<Typography gutterBottom variant=\"h4\" component=\"h1\" style={{margin:'0 16px',fontWeight:'900'}}>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t\n\t\t\t\t\t{\n\t\t\t\t\t\tdoc.___preset.key !== ''\n\t\t\t\t\t\t? (<ListItem style={{m_argin:'0 -32px'}}>\n\t\t\t\t\t\t\t\t<ListItemIcon style={{m_inWidth:'auto',m_arginRight:'16px'}}>\n\t\t\t\t\t\t\t\t\t<div className=\"material-icons-round\" style={{color:doc.___color.fg}}>{doc.___preset.icon ? doc.___preset.icon.toLowerCase() : ''}</div>\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary={doc.___preset.name.en}/>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t{\n\t\t\t\tthis.state.stage === 'viewing'\n\t\t\t\t? this.renderView(doc)\n\t\t\t\t: this.renderQuestions(doc)\n\t\t\t}\n\n\t\t\t</Paper>\n\n\t\t\t<Snackbar\n\t\t\t\tmessage=\"Submitting...\"\n\t\t\t\tanchorOrigin={{vertical:'bottom',horizontal:'left'}}\n\t\t\t\topen={this.state.whichSnackbarIsOpen === 'submittingSuggestion'}\n\t\t\t/>\n\t\t\t<Snackbar\n\t\t\t\tmessage=\"Couldn't submit!\"\n\t\t\t\tanchorOrigin={{vertical:'bottom',horizontal:'left'}}\n\t\t\t\topen={this.state.whichSnackbarIsOpen === 'problemWhileSuggesting'}\n\t\t\t\tautoHideDuration={6000}\n\t\t\t\tonClose={this.closeAllSnackbarsOnTimeout}\n\t\t\t/>\n\t\t\t<Snackbar\n\t\t\t\tmessage=\"Your suggestion got submitted!\"\n\t\t\t\tanchorOrigin={{vertical:'bottom',horizontal:'left'}}\n\t\t\t\topen={this.state.whichSnackbarIsOpen === 'finishedSuggesting'}\n\t\t\t\tautoHideDuration={6000}\n\t\t\t\tonClose={this.closeAllSnackbarsOnTimeout}\n\t\t\t/>\n\t\t</>)\n\t}\n}","import React from 'react'\nimport './index.css'\n\nimport {\n\t// ListSubheader,\n\t// List,\n\t// ListItem,\n\t// ListItemText,\n\t// ListItemIcon,\n\t// ListItemSecondaryAction,\n\n\t// Checkbox,\n\n\tFab,\n\tMenu,\n\tMenuItem,\n} from '@material-ui/core'\n\nimport {\n\tArrowDropDownRounded as ArrowDropDownIcon,\n} from '@material-ui/icons'\n// import {\n// \tToggleButton,\n// \tToggleButtonGroup,\n// } from '@material-ui/lab'\n\nimport PopupState, { bindTrigger, bindMenu } from 'material-ui-popup-state'\n\nimport _categories_ from '../data/dist/categories.json'\nconsole.log('_categories_', _categories_)\n\nexport default class FiltersPanelContent extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tcategory: null,\n\t\t\tage: null,\n\t\t}\n\n\t\tthis.ages = Array.apply(null, Array(15)).map((v,i)=>i+14)\n\t\tthis.highest_ages_entry = this.ages[this.ages.length-1]\n\n\t\tthis.setValue = this.setValue.bind(this)\n\t\tthis.getFilterObj = this.getFilterObj.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\t// setTimeout(()=>{\n\t\t\t// this.setValue('age', 27, ()=>{})\n\t\t// }, 1000)\n\t}\n\n\tgetFilterObj(){\n\n\t\t// const tags = {}\n\t\t// if (!!this.state.age) {\n\t\t// \t// gte = Matches values that are greater than or equal to a specified value. #mongodb\n\t\t// \t// lte = Matches values that are less than or equal to a specified value. #mongodb\n\n\t\t// \tif (this.state.age === this.highest_ages_entry) {\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}else{\t\t\t\t\n\t\t// \t\ttags.min_age = {gte: this.state.age}\n\t\t// \t\ttags.max_age = {lte: this.state.age}\n\t\t// \t}\n\t\t// }\n\n\t\treturn {\n\t\t\tpresets: (!!this.state.category ? this.state.category.presets : []),\n\t\t\t\n\t\t\tselectedAge: this.state.age,\n\t\t\tageOption: (this.state.age === this.highest_ages_entry ? 'open_end' : '')\n\t\t}\n\t}\n\n\tsetValue(stateKeyName, value, closeMenuCallback){\n\t\tthis.setState({[stateKeyName]: (!!value ? value : null)}, ()=>{\n\t\t\tcloseMenuCallback()\n\n\t\t\tif (this.props.onChange) {\n\t\t\t\tthis.props.onChange(this.getFilterObj())\n\t\t\t}\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (<div className=\"filterMenuInner\">\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.category\n\t\t\t\t\t\t\t\t? (<>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{margin:'0 8px 0 -4px',background:this.state.category.color.bg}}></div>\n\t\t\t\t\t\t\t\t\t{this.state.category.name}\n\t\t\t\t\t\t\t\t</>)\n\t\t\t\t\t\t\t\t: 'What to show?'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem value=\"\" onClick={()=>this.setValue('category', null,popupState.close)}>\n\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:'transparent'}}></div>\n\t\t\t\t\t\t\t\tEverything\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t{_categories_.map(category=>{\n\t\t\t\t\t\t\t\tconst isSelected = (!!this.state.category && category.name === this.state.category.name)\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={category.name}\n\t\t\t\t\t\t\t\t\tvalue={category.name}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('category', category,popupState.close)}\n\t\t\t\t\t\t\t\t\tselected={isSelected}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: (isSelected ? category.color.bg : ''),\n\t\t\t\t\t\t\t\t\t\tcolor: (isSelected ? category.color.fg : category.color.bg),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"filterMenuDot\" style={{background:(isSelected ? category.color.fg : category.color.bg)}}></div>\n\t\t\t\t\t\t\t\t\t{category.name}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t<PopupState variant=\"popover\">\n\t\t\t\t{popupState => (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Fab\n\t\t\t\t\t\t\t{...bindTrigger(popupState)}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tvariant=\"extended\"\n\t\t\t\t\t\t\tclassName=\"fab\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t!!this.state.age\n\t\t\t\t\t\t\t\t? (this.state.age===this.highest_ages_entry ? 'For age '+this.state.age+' and up' : 'For age '+this.state.age)\n\t\t\t\t\t\t\t\t: 'For which age?'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ArrowDropDownIcon className=\"ArrowDropDownIcon\"/>\n\t\t\t\t\t\t</Fab>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t{...bindMenu(popupState)}\n\t\t\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t\t\t\tanchorOrigin={{\n\t\t\t\t\t\t\t\tvertical: 'top',\n\t\t\t\t\t\t\t\thorizontal: 'left',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tMenuListProps={{\n\t\t\t\t\t\t\t\tstyle:{\n\t\t\t\t\t\t\t\t\tminWidth:'200px'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem value=\"\" onClick={()=>this.setValue('age', null, popupState.close)}>Any Age</MenuItem>\n\t\t\t\t\t\t\t{this.ages.map(number=>{\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tkey={number}\n\t\t\t\t\t\t\t\t\tvalue={number}\n\t\t\t\t\t\t\t\t\tonClick={()=>this.setValue('age', number, popupState.close)}\n\t\t\t\t\t\t\t\t\tselected={!!this.state.age && number === this.state.age}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{number===this.highest_ages_entry ? '≥ '+number : number}\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</PopupState>\n\n\t\t\t{/*<List dense>\n\t\t\t\t{this.presetCategories.map(item=>{\n\t\t\t\t\tconst thisValue = !!this.state.values.hasOwnProperty(item.title) ? this.state.values[item.title] : true\n\t\t\t\t\treturn (<ListItem button key={item.title}>\n\t\t\t\t\t\t<ListItemIcon style={{minWidth:'0px'}}>\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tchecked={thisValue}\n\t\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\t\tonChange={()=>this.handleClick(item)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t<ListItemText primary={item.title} />\n\t\t\t\t\t</ListItem>)\n\t\t\t\t})}\n\t\t\t</List>*/}\n\n\t\t\t{/*<List subheader={<ListSubheader>For Whom?</ListSubheader>}>\n\t\t\t\t{this.forWhom.map(item=>{\n\t\t\t\t\treturn (<ListItem button key={item.title}>\n\t\t\t\t\t<ListItemText primary={item.title} />\n\n\t\t\t\t\t<ListItemSecondaryAction>\n\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\tvalue={this.state.value}\n\n\t\t\t\t\t\t\tonChange={(event,value)=>this.handleGroup(item,value)}\n\t\t\t\t\t\t\tclassName=\"myToggleButtonGroup\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\texclusive\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ToggleButton value=\"only\">\n\t\t\t\t\t\t\t\tOnly\n\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t<ToggleButton value=\"primary\">\n\t\t\t\t\t\t\t\tPrimary\n\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t\t</ListItemSecondaryAction>\n\t\t\t\t\t</ListItem>)\n\t\t\t\t})}\n\t\t\t</List>*/}\n\t\t</div>)\n\t}\n}\n\n\n\n","import React from 'react'\nimport './index.css'\n\n// import {gql} from 'apollo-boost'\nimport {Router,navigate} from '@reach/router'\nimport {\n\tloadPlace as query_loadPlace,\n\tsearch as query_search,\n} from '../queries.js'\n\n// import categories from '../data/dist/categories.json'\nimport presets from '../data/dist/presets.json'\n// import colors from '../data/dist/colors.json'\n// import colorsByPreset from '../data/dist/colorsByPreset.json'\nimport {getWantedTagsList} from '../functions.js'\n\nimport {\n\t// Fab,\n\t// Drawer,\n\n\t// Card,\n\t// CardActions,\n\t// CardActionArea,\n\t// CardContent,\n\t// Typography,\n\t// Divider,\n\t// Button,\n\t// Checkbox,\n\n\t// List,\n\t// ListItem,\n\t// ListItemText,\n\t// ListItemIcon,\n\t// ListItemSecondaryAction,\n} from '@material-ui/core'\nimport {\n\t// AddRounded as AddIcon,\n\t// FilterList as FilterListIcon,\n\t// ExpandLess as ExpandLessIcon,\n} from '@material-ui/icons'\n\nimport PageMap from '../PageMap/index.js'\nimport SearchBar from '../SearchBar/index.js'\n// import InfoCard from '../InfoCard/index.js'\nimport Sidebar from '../Sidebar/index.js'\nimport FiltersPanelContent from '../FiltersPanelContent/index.js'\n\nimport 'typeface-roboto'\n\nexport default class App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tsearchBarValue: '',\n\t\t\tsidebarIsOpen: false,\n\t\t\tdoc: null,\n\n\t\t\tfilters: {\n\t\t\t\tpresets: []\n\t\t\t}\n\t\t}\n\n\t\tthis.functions = {}\n\n\t\tthis.startSearch = this.startSearch.bind(this)\n\t\tthis.setSearchBarValue = this.setSearchBarValue.bind(this)\n\t\tthis.setSidebarIsOpen = this.setSidebarIsOpen.bind(this)\n\t\tthis.addPlace = this.addPlace.bind(this)\n\t\tthis.loadAndViewDoc = this.loadAndViewDoc.bind(this)\n\t\tthis.filtersChanged = this.filtersChanged.bind(this)\n\n\t\tthis.setView = this.setView.bind(this)\n\t\tthis.flyTo = this.flyTo.bind(this)\n\t\tthis.getZoom = this.getZoom.bind(this)\n\t}\n\n\tsaveFunctions(componentName, functionsObject){\n\t\tthis.functions[componentName] = functionsObject\n\t}\n\n\tsetSearchBarValue(value){\n\t\tthis.setState({searchBarValue:value})\n\t}\n\t\n\tsetSidebarIsOpen(value){\n\t\t// const center = this.functions['PageMap'].getCenter()\n\t\t// const zoom = this.functions['PageMap'].getZoom()\n\n\t\tthis.setState({sidebarIsOpen:value}, ()=>{\n\t\t\t// if (new Date()*1 - window.pageOpenTS*1 > 2000) {\n\t\t\t// \t// this.functions['PageMap'].invalidateSize()\n\t\t\t// \tsetTimeout(()=>{\n\t\t\t// \t\t// const center2 = this.functions['PageMap'].getCenter()\n\t\t\t// \t\tconsole.log('center', center, zoom)\n\t\t\t// \t\t// console.log('center2', center2)\n\t\t\t// \t\tthis.functions['PageMap'].flyTo(center, Math.round(zoom), {\n\t\t\t// \t\t\tanimate: true,\n\t\t\t// \t\t\tduration: 1.5,\n\t\t\t// \t\t})\n\t\t\t// \t\t// this.functions['PageMap'].invalidateSize()\n\t\t\t// \t}, 500)\n\t\t\t// }\n\n\t\t\t// if (new Date()*1 - window.pageOpenTS*1 < 2000) {\n\t\t\t// \tconsole.log('center-2', center)\n\t\t\t// \tthis.functions['PageMap'].panTo(center, {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }else{\n\t\t\t// \tthis.functions['PageMap'].panTo(\n\t\t\t// \t\tthis.functions['PageMap'].getCenter(), {\n\t\t\t// \t\tanimate: true,\n\t\t\t// \t\tduration: 5,\n\t\t\t// \t})\n\t\t\t// }\n\t\t})\n\t}\n\n\tstartSearch(queryString,callback){\n\t\tif (queryString && queryString !== '' && queryString.length > 1 && /\\S/.test(queryString)) {\n\t\t\twindow.graphql.query({\n\t\t\t\tquery: query_search,\n\t\t\t\tvariables: {query: queryString},\n\t\t\t}).then(async result => {\n\t\t\t\tawait navigate(`/`)\n\n\t\t\t\tthis.functions['PageMap'].flyToBounds([\n\t\t\t\t\t[\n\t\t\t\t\t\tresult.data.search.geometry.boundingbox.southwest.lat,\n\t\t\t\t\t\tresult.data.search.geometry.boundingbox.southwest.lng,\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\tresult.data.search.geometry.boundingbox.northeast.lat,\n\t\t\t\t\t\tresult.data.search.geometry.boundingbox.northeast.lng,\n\t\t\t\t\t]\n\t\t\t\t], {\n\t\t\t\t\tanimate: true,\n\t\t\t\t\tduration: 1.5,\n\t\t\t\t})\n\n\t\t\t\t// this.functions['PageMap'].setBounds([\n\t\t\t\t// \t[result.data.geocode.boundingbox[0], result.data.geocode.boundingbox[2]],\n\t\t\t\t// \t[result.data.geocode.boundingbox[1], result.data.geocode.boundingbox[3]]\n\t\t\t\t// ])\n\t\t\t\tcallback()\n\t\t\t}).catch(error=>{\n\t\t\t\tconsole.error(error)\n\t\t\t\tcallback()\n\t\t\t})\n\t\t}else{\n\t\t\tcallback()\n\t\t}\n\t}\n\n\tloadAndViewDoc(docID){\n\t\tif (docID && docID !== '' && docID.length > 1 && /\\S/.test(docID)) {\n\t\t\twindow.graphql.query({\n\t\t\t\tquery: query_loadPlace,\n\t\t\t\tvariables: {\n\t\t\t\t\t_id: docID,\n\t\t\t\t\twantedTags: [\n\t\t\t\t\t\t...this.functions['Sidebar'].getWantedTagsList(),\n\t\t\t\t\t\t...getWantedTagsList(presets),\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t}).then(async result=>{\n\t\t\t\tconst doc = result.data.getPlace\n\t\t\n\t\t\t\tif (doc !== null) {\n\t\t\t\t\tthis.functions['Sidebar'].setDoc(doc)\n\t\t\n\t\t\t\t\tlet zoomLevel = this.functions['PageMap'].getZoom()\n\t\t\t\t\tif (zoomLevel < 17) {\n\t\t\t\t\t\tzoomLevel = 17\n\t\t\t\t\t}\n\n\t\t\t\t\tif (new Date()*1 - window.pageOpenTS*1 < 2000) {\n\t\t\t\t\t\tthis.functions['PageMap'].setView(\n\t\t\t\t\t\t\t[doc.properties.geometry.location.lat,doc.properties.geometry.location.lng],\n\t\t\t\t\t\t\tzoomLevel\n\t\t\t\t\t\t)\n\t\t\t\t\t// }else{\n\t\t\t\t\t// \tthis.functions['PageMap'].flyTo(\n\t\t\t\t\t// \t\t[doc.properties.geometry.location.lat,doc.properties.geometry.location.lng],\n\t\t\t\t\t// \t\tzoomLevel,\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tanimate: true,\n\t\t\t\t\t// \t\t\tduration: 1,\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).catch(error=>{\n\t\t\t\tconsole.error(error)\n\t\t\t})\n\t\t}\n\t}\n\n\tasync addPlace(){\n\n\t\tawait navigate(`/place/add/`)\n\t\tsetTimeout(()=>{\n\t\t\tthis.functions['Sidebar'].editNewDoc('Place')\n\t\t}, 100)\n\n\t\t// this.setState({doc:{\n\t\t// \t_id: null,\n\t\t// \tproperties: {\n\t\t// \t\t__typename: 'Place',\n\t\t// \t},\n\t\t// }}, async ()=>{\n\t\t// \tawait navigate(`/place/add/`)\n\t\t// })\n\t}\n\n\tsetView(...attr){\n\t\treturn this.functions['PageMap'].setView(...attr)\n\t}\n\tflyTo(...attr){\n\t\treturn this.functions['PageMap'].flyTo(...attr)\n\t}\n\tgetZoom(...attr){\n\t\treturn this.functions['PageMap'].getZoom(...attr)\n\t}\n\n\tfiltersChanged(newFilters){\n\t\tconsole.log('filtersChanged', newFilters)\n\t\tthis.setState({filters:newFilters})\n\t}\n\n\trender() {\n\t\treturn (<>\n\t\t\t<SearchBar\n\t\t\t\tclassName=\"SearchBar\"\n\t\t\t\tonStartSearch={this.startSearch}\n\t\t\t\tvalue={this.state.searchBarValue}\n\t\t\t\tsidebarIsOpen={this.state.sidebarIsOpen}\n\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t/>\n\n\t\t\t{/*<Card>\n\t\t\t\tStart Info:\n\n\t\t\t\tWhere can I meet queer people in my town?\n\t\t\t\tWhere is the next queer-youth-center?\n\t\t\t\t\n\t\t\t\tHelp us answer these questions!\n\n\t\t\t\tAdd queer-infos about places around you.\n\t\t\t</Card>*/}\n\n\t\t\t{/*<InfoCard\n\t\t\t\tclassName=\"InfoCard\"\n\t\t\t\tplace={this.state.selectedPlace}\n\t\t\t/>*/}\n\n\t\t\t{/*<Fab variant=\"extended\" className=\"addNewFab\" onClick={this.addPlace}>\n\t\t\t\t<AddIcon style={{color:'var(--light-green)',marginRight:'8px'}} />\n\t\t\t\tAdd a Place\n\t\t\t</Fab>*/}\n\n\t\t\t<div className=\"filtersPanel\">\n\t\t\t\t<FiltersPanelContent onChange={this.filtersChanged}/>\n\t\t\t</div>\n\n\t\t\t<Router primary={false}>\n\t\t\t\t<Sidebar\n\t\t\t\t\tpath=\"/place/:docID\"\n\t\t\t\t\t\n\t\t\t\t\tclassName=\"Sidebar\"\n\t\t\t\t\t\n\t\t\t\t\tonViewDoc={this.loadAndViewDoc}\n\t\t\t\t\tonSetSearchBarValue={this.setSearchBarValue}\n\t\t\t\t\tonSetSidebarIsOpen={this.setSidebarIsOpen}\n\n\t\t\t\t\tonSetView={this.setView}\n\t\t\t\t\tonFlyTo={this.flyTo}\n\t\t\t\t\tonGetZoom={this.getZoom}\n\t\t\t\t\tonFunctions={(...attr)=>{this.saveFunctions('Sidebar',...attr)}}\n\t\t\t\t/>\n\t\t\t</Router>\n\t\t\t\n\t\t\t<PageMap\n\t\t\t\tclassName={'page'+(this.state.sidebarIsOpen ? ' sidebarIsOpen' : '')}\n\n\t\t\t\tonViewDoc={this.loadAndViewDoc}\n\t\t\t\tonFunctions={(...attr)=>{this.saveFunctions('PageMap',...attr)}}\n\t\t\t\n\t\t\t\tfilters={this.state.filters}\n\t\t\t/>\n\t\t</>)\n\t}\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\n// import * as serviceWorker from './serviceWorker'\n\nimport App from './App/index.js'\n\nimport ApolloClient from 'apollo-boost'\n// import { InMemoryCache } from 'apollo-cache-inmemory';\n\n\n// const cache = new InMemoryCache()\n\nwindow.graphql = new ApolloClient({\n\t// cache,\n\n\t// uri: window.location.origin+'/graphql/v1',\n\turi: (\n\t\twindow.location.host === '192.168.2.102:3000'\n\t\t? 'http://192.168.2.102:5000/queercenters/us-central1/graphql/graphql/v1'\n\t\t: window.location.origin+'/graphql/v1'\n\t),\n\t// uri: (\n\t// \twindow.location.hostname === 'localhost'\n\t// \t? 'http://localhost:5001/queercenters/us-central1/graphql/v1'\n\t// \t: 'https://queer.qiekub.com/graphql/v1' // 'https://us-central1-queercenters.cloudfunctions.net/graphql/v1'\n\t// ),\n\n\t// https://us-central1-queercenters.cloudfunctions.net/graphql/v1\n\t// http://localhost:5001/queercenters/us-central1/graphql/v1\n})\n\nwindow.pageOpenTS = new Date()\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister()\n","module.exports = __webpack_public_path__ + \"static/media/yelp.9b487818.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/instagram.e99806af.png\";"],"sourceRoot":""}